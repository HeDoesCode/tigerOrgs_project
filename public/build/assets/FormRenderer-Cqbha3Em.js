import{j as e,r as b,q as N,W as y}from"./app-h74hxgxF.js";import{A as v}from"./AdminAlertDialog-Dj5uqTDC.js";function w({item:s,value:r,onChange:a}){switch(x(s.name),s.type){case"text":case"email":case"number":return e.jsx(k,{type:s.type,name:s.name,required:s.required,value:r||"",onChange:a});case"file_upload":return e.jsx(F,{name:s.name,required:s.required,onChange:a,accept:".pdf,.doc,.docx"});case"image_upload":return e.jsx(C,{name:s.name,required:s.required,onChange:a,allowedTypes:s.allowedTypes||["image/jpeg","image/png"]});case"checkbox":return e.jsx(A,{name:s.name,options:s.options,required:s.required,value:r?typeof r=="string"?JSON.parse(r):r:[],onChange:a});case"select":case"radio":return e.jsx(S,{type:s.type,name:s.name,options:s.options,required:s.required,value:r||"",onChange:a});default:return null}}function x(s){return s.toLowerCase().trim().replaceAll(" ","_")}function k({type:s,name:r,required:a,value:l,onChange:c}){const i=x(r);return e.jsxs("li",{className:"mb-4",children:[e.jsxs("label",{htmlFor:i,className:"block mb-1",children:[r,a&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:s,className:"w-full px-3 py-2 bg-transparent border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",id:i,name:i,required:a,value:l,onChange:o=>c(o.target.value)})]})}function F({name:s,required:r,onChange:a,accept:l}){const c=x(s),i=o=>{const t=o.target.files[0];t&&a(t)};return e.jsxs("li",{className:"mb-4",children:[e.jsxs("label",{htmlFor:c,className:"block font-medium text-gray-700 mb-1",children:[s,r&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:"file",className:"w-full px-3 py-2 text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",id:c,name:c,required:r,accept:l,onChange:i})]})}function C({name:s,required:r,onChange:a,allowedTypes:l}){const[c,i]=b.useState(null),[o,t]=b.useState(""),u=x(s),f=5,p=f*1024*1024,n=d=>{const m=d.target.files[0];if(t(""),i(null),!m)return;if(!l.includes(m.type)){t(`Invalid file type. Please upload a ${l.map(g=>g.split("/")[1]).join(" or ")} file.`),d.target.value="";return}if(m.size>p){t(`File size must be less than ${f}MB`),d.target.value="";return}const h=new FileReader;h.onloadend=()=>{i(h.result),a(m)},h.readAsDataURL(m)};return e.jsxs("li",{className:"mb-4",children:[e.jsxs("label",{htmlFor:u,className:"block mb-1",children:[s,r&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",className:"w-full px-3 py-2 text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",id:u,name:u,required:r,accept:l.join(","),onChange:n}),o&&e.jsx("p",{className:"text-sm text-red-600",children:o}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Max file size: ",f,"MB. Accepted formats:"," ",l.map(d=>d.split("/")[1].toUpperCase()).join(", ")]}),c&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:c,alt:"Preview",className:"max-w-xs h-auto rounded-lg border border-gray-200"})})]})]})}function A({name:s,options:r,required:a,value:l=[],onChange:c}){const i=x(s),[o,t]=b.useState(!1),u=Array.isArray(l)?l.map(p=>x(p)):[],f=p=>{const{value:n,checked:d}=p.target;let m;if(d)m=[...u,n];else{if(u.length===1&&a){t(!0);return}m=u.filter(h=>h!==n)}t(a&&m.length===0),c(m.map(h=>r.find(g=>x(g)===h)||h).map(h=>x(h)))};return e.jsx("li",{className:"mb-4",children:e.jsxs("fieldset",{children:[e.jsxs("legend",{className:"block font-medium text-gray-700 mb-1",children:[s,a&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("div",{className:"space-y-2",children:r.map((p,n)=>{const d=x(p);return e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:i,id:`${i}-${n}`,value:d,checked:u.includes(d),onChange:f,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("label",{htmlFor:`${i}-${n}`,className:"ml-2 block text-gray-700",children:p})]},n)})}),o&&e.jsx("p",{className:"text-sm text-red-600",children:"Please select at least one option."})]})})}function S({type:s,name:r,options:a,required:l,value:c,onChange:i}){const o=x(r);return s==="select"?e.jsxs("li",{className:"mb-4",children:[e.jsxs("label",{htmlFor:o,className:"block font-medium text-gray-700 mb-1",children:[r,l&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("select",{className:"w-full px-3 py-2 bg-transparent border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",name:o,id:o,value:c,onChange:t=>i(t.target.value),required:l,children:[l?e.jsx("option",{value:"",disabled:!0,children:"Please select an option"}):e.jsx("option",{value:"",children:"No option selected"}),a.map((t,u)=>e.jsx("option",{value:x(t),children:t},u))]})]}):s==="radio"?e.jsx("li",{className:"mb-4",children:e.jsxs("fieldset",{children:[e.jsxs("legend",{className:"font-medium text-gray-700 mb-1",children:[r,l&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"space-y-2",children:[!l&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:o,id:`${r}-none`,value:"",checked:c==="",onChange:t=>i(t.target.value),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("label",{htmlFor:`${r}-none`,className:"ml-2 block text-gray-700",children:"No Option Selected"})]}),a.map((t,u)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:o,id:`${r}-${u}`,value:x(t),checked:c===x(t),onChange:f=>i(f.target.value),required:l,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("label",{htmlFor:`${r}-${u}`,className:"ml-2 block text-gray-700",children:t})]},u))]})]})}):null}function M({formLayout:s,orgID:r,formID:a}){const{errors:l,old:c}=N().props,{data:i,setData:o,post:t,reset:u}=y({userData:{},formLayout:s,orgID:r,formID:a});b.useEffect(()=>{if(c){const n={};s.layout.forEach(d=>{const m=j(d.name);c[m]!==void 0&&(n[m]=c[m])}),o("userData",n)}},[c,s,o]);function f(n,d){o("userData",{...i.userData,[n]:d})}function p(n){n.preventDefault(),t(route("formSubmission",{orgID:r,formID:a}),{preserveState:!0,preserveScroll:!0})}return e.jsx("div",{className:"min-h-screen py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("form",{className:"bg-white shadow-md rounded-lg overflow-hidden",onSubmit:p,children:[e.jsxs("div",{className:"px-6 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:s.name}),s.desc&&e.jsx("p",{className:"text-gray-600 mb-8",children:s.desc}),Object.keys(l).length>0&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"font-medium text-red-800",children:"There were errors with your submission"}),e.jsx("ul",{className:"mt-2 text-red-700 list-disc list-inside",children:Object.keys(l).map((n,d)=>e.jsx("li",{children:l[n]},d))})]})]})}),e.jsx("ul",{className:"space-y-6",children:s.layout.map((n,d)=>e.jsx(w,{item:n,value:i.userData[j(n.name)],onChange:m=>f(j(n.name),m)},d))})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 flex justify-between",children:[e.jsx(v,{trigger:e.jsx("div",{type:"reset",className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Clear Form"}),title:"Are you sure you want to reset all the inputs in the form?",accept:"Confirm",onclick:()=>u()}),e.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent font-medium rounded-md shadow-sm text-white bg-[#04aa6dd5] hover:bg-[#04AA6D] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Submit"})]})]})})})}function j(s){return s.toLowerCase().trim().replaceAll(" ","_")}export{M as F};
