import{r as u,j as e,y as F,Y as L,R as b}from"./app-Nah0YeiV.js";import{I as z}from"./IconMailFilled-DoQz7_bC.js";import{U as M}from"./UserLayout-0QZYyfBd.js";import{D as B,a as R,b as A,c as T,d as W,e as H,f as V}from"./dialog-q4YAmxIc.js";import{B as Y}from"./button-NIdFJHNh.js";import"./IconMenu3-Be-ovQ-L.js";import"./IconProfile-BdKZaGT5.js";import"./dropdown-menu-D5ewfSrD.js";function q({keywords:t,className:j,activeUserKeywords:x}){t=f(t);function f(s){return s.sort((r,a)=>r.keyword.localeCompare(a.keyword))}const[i,g]=u.useState([]),[c,l]=u.useState([]),[m,h]=u.useState(!1);u.useEffect(()=>{p()},[]),u.useEffect(()=>{h(i!==x)},[i]);const p=()=>{g(x);const s=t.filter(r=>!x.some(a=>a.keyword===r.keyword));l(s)},[w,d]=u.useState(""),v=s=>{if(d(s.target.value),s.target.value===""||s.target.value===null){l(f(c));return}const r=c.filter(o=>o.keyword.toLowerCase().includes(s.target.value.toLowerCase())).sort((o,k)=>{const y=s.target.value.toLowerCase(),C=o.keyword.toLowerCase(),S=k.keyword.toLowerCase(),D=C.startsWith(y)?0:1,E=S.startsWith(y)?0:1;return D!==E?D-E:C.indexOf(y)-S.indexOf(y)||C.localeCompare(S)}),a=c.filter(o=>!o.keyword.toLowerCase().includes(s.target.value.toLowerCase())).sort((o,k)=>o.keyword.localeCompare(k.keyword));l([...r,...a])},n=s=>{const r=f([...i,s]);g(r),l(a=>a.filter(o=>o.keyID!==s.keyID))},N=s=>{const r=[s,...c];l(f(r)),g(a=>a.filter(o=>o.keyID!==s.keyID))},I=()=>{F.patch(route("update.user.keywords"),{activeKeywords:i})};return e.jsxs("div",{className:`w-full flex flex-wrap gap-2 min-h-10 border-[1px] rounded-md p-2 relative text-xs overflow-clip group ${j}`,children:[e.jsxs(B,{children:[e.jsx(R,{className:"absolute size-full inset-0",children:e.jsxs("div",{className:"size-full flex items-center justify-center invisible group-hover:visible group-hover:!bg-gray-800/70 text-black/0 group-hover:!text-white transition-all duration-200 ease-in-out",children:[i&&"Edit"||"Add","Â Keyword Filters"]})}),e.jsxs(A,{className:"sm:max-w-[32rem] !h-fit max-h-[90%] w-[90%] sm:h-auto overflow-y-auto select-none",children:[e.jsxs(T,{children:[e.jsx(W,{children:"Add/Remove Keyword Filters"}),e.jsxs(H,{className:"!-mb-3",children:["Filter organizations by adding or removing keywords. Save changes when you're done.",e.jsxs("span",{className:`text-red-500 font-bold ${m?"visible":"invisible"}`,children:[e.jsx("br",{}),"You have unsaved changes."]})]})]}),e.jsxs("div",{className:"flex gap-x-3",children:[e.jsx("input",{className:"w-full rounded-md",type:"text",autoComplete:"off",placeholder:"Find Keywords...",name:"keyword_filter",onChange:v,value:w}),e.jsx("button",{onClick:p,className:"h-full px-3 border border-black rounded-md hover:bg-gray-800 hover:text-white transition-all",children:"Reset"})]}),e.jsxs("div",{className:"w-full flex flex-wrap justify-center sm:justify-start gap-2 border-[1px] rounded-md border-gray-800 p-2 relative text-xs overflow-clip",children:[i.length!==0&&i.map((s,r)=>e.jsx(K,{name:s.keyword,remove:!0,onClick:()=>N(s)},r)),i.length===0&&e.jsx("div",{className:"pl-1 h-8 flex items-center",children:"(No Keywords Selected)"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-up",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M12 5l0 14"}),e.jsx("path",{d:"M18 11l-6 -6"}),e.jsx("path",{d:"M6 11l6 -6"})]})}),e.jsx("div",{className:"w-full flex flex-wrap justify-center sm:justify-start gap-2 border-[1px] rounded-md border-gray-300 p-2 relative text-xs",children:c.map((s,r)=>e.jsx(K,{name:s.keyword,add:!0,onClick:()=>n(s)},r))}),m&&e.jsx(V,{asChild:!0,children:e.jsxs("div",{className:"w-full flex justify-end space-x-3",children:[e.jsx("div",{className:"text-red-500 font-bold my-auto",children:"You have unsaved changes."}),e.jsx(Y,{type:"button",className:"bg-transparent hover:!bg-gray-800 text-black hover:!text-white border border-black w-fit",onClick:I,children:"Update"})]})})]})]}),x.length!==0?x.map((s,r)=>e.jsx($,{name:s.keyword},r)):e.jsx("div",{className:"text-gray-500 my-auto flex items-center",children:"(None Selected. We'll use this to recommend organizations to you.)"})]});function $({name:s}){return e.jsx("div",{className:"w-min px-2 py-1 bg-[#ffb700] border border-gray-300 h-fit rounded-md cursor-pointer whitespace-nowrap",children:s})}function K({name:s,remove:r,add:a,...o}){return e.jsxs("button",{...o,className:`select-none w-min px-2 py-1 ${a&&"bg-gray-200"} ${r&&"bg-[#ffb700]"} border border-gray-300 h-8 rounded-md space-x-2 flex items-center ${a&&"hover:bg-gray-300"} ${r&&"hover:bg-[#e6a70b]"} group`,children:[e.jsx("span",{className:"whitespace-nowrap",children:s}),e.jsxs("div",{className:"h-5 aspect-square text-gray-400",children:[r&&e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"currentColor",className:"icon icon-tabler icons-tabler-filled icon-tabler-circle-x text-black/70",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M17 3.34a10 10 0 1 1 -14.995 8.984l-.005 -.324l.005 -.324a10 10 0 0 1 14.995 -8.336zm-6.489 5.8a1 1 0 0 0 -1.218 1.567l1.292 1.293l-1.292 1.293l-.083 .094a1 1 0 0 0 1.497 1.32l1.293 -1.292l1.293 1.292l.094 .083a1 1 0 0 0 1.32 -1.497l-1.292 -1.293l1.292 -1.293l.083 -.094a1 1 0 0 0 -1.497 -1.32l-1.293 1.292l-1.293 -1.292l-.094 -.083z"})]}),a&&e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"currentColor",className:"icon icon-tabler icons-tabler-filled icon-tabler-circle-plus",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M4.929 4.929a10 10 0 1 1 14.141 14.141a10 10 0 0 1 -14.14 -14.14zm8.071 4.071a1 1 0 1 0 -2 0v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0 -2h-2v-2z"})]})]})]})}}function Z({user:t,activeUserKeywords:j,keywords:x}){const f=`${t.firstname} ${t.lastname} ${t.middlename}`,i=t.section!=null?null:"Specify Section";return e.jsxs("div",{className:"w-full",children:[e.jsx(L,{title:"Profile"}),e.jsxs(M,{children:[e.jsxs("div",{className:"w-full poppins text-lg md:text-xl font-bold mt-3 mb-5",children:["Manage ",e.jsx("span",{className:"text-[#ffb700]",children:"Profile"})]}),e.jsx("div",{className:"mt-4 w-full flex justify-center px-5",children:e.jsxs("div",{className:"w-full max-w-[65rem] flex flex-col items-center drop-shadow shadow-black rounded-[2rem] space-y-3 bg-[#F4F4F4] border border-gray-300",children:[e.jsxs("div",{className:"h-36 w-full flex flex-col justify-center px-12 space-y-3 bg-[#ffd875] rounded-[2rem]",children:[e.jsx("span",{className:"poetsen-one text-xl sm:text-3xl uppercase ",children:f}),e.jsxs("div",{className:"flex gap-x-3 text-sm sm:textbase",children:[e.jsx("div",{className:"hidden sm:contents",children:e.jsx(z,{})}),e.jsx("span",{children:t.email})]})]}),e.jsxs("div",{className:"w-full rounded-[2rem] bg-[#F0F0F0] drop-shadow border border-gray-300 p-8",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:[e.jsxs("div",{className:"",children:["ID Number:",e.jsx("div",{className:"text-lg font-semibold",children:t.userID})]}),e.jsxs("div",{className:"",children:["Affiliation:",e.jsx("div",{className:"text-lg font-semibold ",children:t.college})]}),e.jsxs("div",{className:"",children:["Stakeholder Category:",e.jsx("div",{className:"text-lg font-semibold ",children:t.status})]}),e.jsx(g,{})]}),e.jsx("div",{className:"mt-10",children:e.jsx(c,{title:"Interests",className:"min-h-11",children:e.jsx(q,{activeUserKeywords:j,keywords:x})})})]})]})})]})]});function g(){const[l,m]=u.useState(t.section||""),h=d=>{m(d.target.value)},p=d=>{d.key==="Enter"&&w(l)},w=d=>{d===""||l===t.section||F.patch(route("update.user.section"),{section:d})};return e.jsx(c,{title:"Section",error:i||l!==t.section?"Unsaved":"",children:e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"text",maxLength:10,placeholder:"[YEAR]-[SECTION] ex. 3-ITG",className:"w-full rounded-l-lg focus:border-black border-transparent",value:l,onChange:h,onKeyDown:p}),l!==t.section&&e.jsx("button",{className:"px-3 border-l border-l-gray-200",onClick:()=>m(t.section||""),children:"Cancel"}),e.jsx("button",{className:`rounded-r-lg border-l border-l-gray-200 px-3 ${l!==t.section?"hover:bg-black/5 text-black":"cursor-not-allowed text-gray-500"}`,disabled:l===t.section,onClick:()=>w(l),children:"Save"})]})})}function c({children:l,className:m,error:h,title:p,...w}){const d=b.Children.toArray(l).some(n=>b.isValidElement(n)&&n.props.required),v=b.Children.map(l,n=>{if(b.isValidElement(n)){if(n.type==="input"){const N=n.props.className||"";return b.cloneElement(n,{className:`${N} border-none h-full`.trim()})}return n}return n});return e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"w-full flex justify-between gap-x-1 items-end",children:[e.jsxs("label",{className:"h-fit flex-1 flex-wrap leading-[1.15rem]",children:[p," ",d&&e.jsx("span",{className:"text-red-500 text-xl leading-3",children:"*"})]}),e.jsx("div",{className:`mt-2 flex items-end text-[0.7rem] leading-[0.8rem] py-1 px-2 max-w-32 h-fit text-white rounded-t-lg bg-red-500 ${h?"":"invisible"}`,children:h})]}),e.jsx("div",{className:`w-full min-h-9 bg-white border overflow-clip ${h?"border-red-500 rounded-b-lg rounded-l-lg":"border-gray-300 rounded-lg"} ${m}`,children:v})]})}}export{Z as default};
