import{j as e,r as i,y as b,W as V,Y as B}from"./app-wTbvq_QV.js";import{S as W}from"./SuperAdminLayout-C22QNgtH.js";import{I as H}from"./IconInvite-CLL_mbZb.js";import{I as $}from"./IconCheckBox-ClYu8ZT4.js";import{M as F}from"./MainAdminFrame-CZzgPJkk.js";import{I as T}from"./IconEdit-CsHZr7cq.js";import{S as P,A as u}from"./Searchbar-k3eRUGUx.js";import{I as Q}from"./IconEye-BpHbPMTR.js";import{D as R,a as _,b as q,c as U,d as Y,g as G}from"./dropdown-menu-DaaXx7JZ.js";import"./index-fuKT8Dx1.js";import"./alert-dialog-DAaWwLRw.js";import"./switch-Cps2QH3c.js";import{C as J}from"./CustomPagination-kN20xS-r.js";import{S as K,a as X,b as Z,c as z,d as w}from"./select-oBeghI5w.js";import"./IconMenu3-CRQ8g1bN.js";import"./index-oeJazVoZ.js";import"./button-UyB_9sy1.js";import"./IconSearch-CY4btdhs.js";import"./index-CkVXNEJA.js";import"./index-x-fOI6Hq.js";function ee({size:s}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:s||"24",height:s||"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-users",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0"}),e.jsx("path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),e.jsx("path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85"})]})}function te({size:s}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:s||"24",height:s||"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-bolt",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11"})]})}function se({size:s,className:n}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:s||"24",height:s||"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`icon icon-tabler icons-tabler-outline icon-tabler-chevron-down ${n}`,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M6 9l6 6l6 -6"})]})}function le({size:s}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:s||"24",height:s||"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-device-floppy",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2"}),e.jsx("path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),e.jsx("path",{d:"M14 4l0 4l-6 0l0 -4"})]})}function re({size:s}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:s||"24",height:s||"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-cancel",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),e.jsx("path",{d:"M18.364 5.636l-12.728 12.728"})]})}function ne({onSelect:s,...n}){return e.jsxs(R,{children:[e.jsx(_,{className:"w-full",children:n.triggerContent}),e.jsxs(q,{className:"bg-[#f8f8f8] border-gray-300 flex flex-col justify-center space-y-2 p-2",children:[e.jsx(U,{className:"poppins",children:n.title}),e.jsx(Y,{className:"bg-gray-300 mx-2"}),n.dropdownItems.map((o,r)=>e.jsx(G,{onSelect:()=>s(o.value),className:"poppins",children:o.name},r))]})]})}function ae({edit:s,visible:n,setVisible:o,organization:r,onEdit:N,onDelete:c}){i.useRef(null);const m=n?"bg-green-50  border-green-600 text-green-800":"bg-red-50  border-red-600 text-red-800";return i.useState({name:r.name,department:r.department}),e.jsxs("div",{className:"hover:scale-[1.02] transition-all duration-300 ease-in-out px-4 rounded-xl divide-y divide-gray-300 shadow-lg bg-white hover:bg-gray-100 transOptimize",children:[e.jsxs("div",{className:"py-4 ",children:[e.jsxs("div",{className:"grid grid-cols-6  ",children:[e.jsx("div",{className:"p-2 col-span-2 content-center",children:e.jsx("img",{className:"rounded-full",src:`/storage/logo/${r.logo}`,alt:"Organization Logo",onError:d=>{d.target.onerror=null,d.target.src="https://placehold.co/500x500"}})}),e.jsx("div",{className:"col-span-3  px-2",children:e.jsx("h1",{className:"text-sm font-bold py-4 ",children:r.name})})]}),e.jsx("h3",{className:"text-gray-500 text-xs pt-4 text-justify font-semibold",children:r.department})]}),e.jsxs("div",{className:"grid grid-rows-1 py-4",children:[e.jsxs("div",{className:"grid grid-cols-6 py-1",children:[e.jsx("div",{className:"col-start-1 col-end-2 flex justify-center",children:e.jsx(ee,{})}),e.jsx("div",{className:"text-sm font-semibold col-start-2 col-end-4 content-center",children:"Members:"}),e.jsx("div",{className:"text-sm font-semibold col-start-4 col-end-7 flex justify-center",children:r.members_count!==void 0?r.members_count:"Members not set"})]}),e.jsxs("div",{className:"grid grid-cols-6 py-1 ",children:[e.jsx("div",{className:"col-start-1 col-end-2 flex justify-center ",children:e.jsx(Q,{})}),e.jsx("div",{className:"text-sm font-semibold col-start-2 col-end-4 content-center",children:e.jsx("span",{children:"Visibility:"})}),s?e.jsx("div",{className:`text-sm font-semibold col-start-4 col-end-7 flex justify-center rounded-xl border-2 ${m}`,children:e.jsx(ne,{triggerContent:e.jsxs("div",{className:"pl-1 flex items-center justify-center poppins",children:[n?"Visible":"Not Visible",e.jsx(se,{size:"15"})]}),title:"Select visibility",dropdownItems:[{name:"Visible",value:!0},{name:"Not Visible",value:!1}],onSelect:o})}):e.jsx("div",{className:`text-sm font-semibold col-start-4 col-end-7 flex justify-center rounded-xl border-2 ${m}`,children:e.jsx("div",{className:"pl-1 flex content-center poppins",children:n?"Visible":"Not Visible"})})]}),e.jsxs("div",{className:"grid grid-cols-6 py-1 ",children:[e.jsx("div",{className:"col-start-1 col-end-2 flex justify-center",children:e.jsx(te,{})}),e.jsx("div",{className:"text-sm font-semibold col-start-2 col-end-4 content-center",children:"Status:"}),e.jsx("div",{className:`text-sm font-semibold col-start-4 col-end-7 flex justify-center rounded-xl poppins border-2 ${m}`,children:n?"Active":"Inactive"})]})]})]})}function Ee({organizations:s={data:[]},departments:n=[],filters:o={}}){const[r,N]=i.useState((s==null?void 0:s.data)||[]),[c,m]=i.useState(o.search||""),[d,y]=i.useState(o.department||"All"),[S,ie]=i.useState(n),[p,x]=i.useState(!1),[h,f]=i.useState(()=>s!=null&&s.data?s.data.reduce((t,l)=>(l!=null&&l.orgID&&(t[l.orgID]=l.visibility),t),{}):{}),[ce,g]=i.useState((s==null?void 0:s.data)||[]);i.useEffect(()=>{(()=>{let l=r;c&&(l=l.filter(a=>{var j,v;return((j=a==null?void 0:a.name)==null?void 0:j.toLowerCase().includes(c.toLowerCase()))||((v=a==null?void 0:a.department)==null?void 0:v.toLowerCase().includes(c.toLowerCase()))})),d!=="All"&&(l=l.filter(a=>(a==null?void 0:a.department)===d)),g(l)})()},[c,d,r]);const I=t=>{m(t.target.value)};i.useEffect(()=>{const t=setTimeout(()=>{b.get(route("superadmin.status"),{search:c,department:d},{preserveState:!0,preserveScroll:!0})},300);return()=>clearTimeout(t)},[c]);const k=t=>{y(t),b.get(route("superadmin.status"),{search:c,department:t},{preserveState:!0,preserveScroll:!0})},{data:de,setData:C,post:D,processing:M,reset:E}=V({organizations:r.map(t=>({id:t==null?void 0:t.orgID,visibility:t==null?void 0:t.visibility}))});i.useEffect(()=>{C("organizations",r.map(t=>({id:t==null?void 0:t.orgID,visibility:h[t==null?void 0:t.orgID]})))},[h]);const L=()=>{x(t=>!t)},A=()=>{D(route("superadmin.update-organizations"),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{x(!1),s!=null&&s.data&&s.data.forEach(t=>{t!=null&&t.orgID&&(t.visibility=h[t.orgID])})},onError:()=>{console.error("Save failed. Please try again.")}})},O=()=>{s!=null&&s.data&&f(s.data.reduce((t,l)=>(l!=null&&l.orgID&&(t[l.orgID]=l.visibility),t),{})),x(!1),E()};return e.jsxs("div",{className:"w-full",children:[e.jsx(B,{title:"OSA Dashboard"}),e.jsx(W,{children:e.jsx(F,{navItems:[{icon:e.jsx($,{}),label:"Status",link:"superadmin.status"},{icon:e.jsx(H,{}),label:"Invite",link:"superadmin.invite"}],title:"Manage Organizations",searchbar:e.jsx(P,{className:"col-span-3",value:c,onChange:I,placeholder:"Search for an organization"}),filter:e.jsx("div",{className:"text-xs col-span-2 shadow-lg flex justify-center rounded-r-xl bg-white text-black",children:e.jsxs(K,{value:d,onValueChange:k,children:[e.jsx(X,{className:"w-full h-12 border-white bg-transparent",children:e.jsx(Z,{placeholder:"All"})}),e.jsxs(z,{className:"border-gray-500 bg-[#EEEEEE] quicksand",ref:t=>{t&&(t.ontouchstart=l=>l.preventDefault())},children:[e.jsx(w,{value:"All",className:"hover:!bg-gray-3 hover:!text-white focus:!bg-gray-800 focus:!text-white h-10",children:"All"}),S.map((t,l)=>e.jsx(w,{value:t,className:"hover:!bg-gray-800 hover:!text-white focus:!bg-gray-800 focus:!text-white h-10",children:t},l))]})]})}),children:e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex justify-end me-5 mt-5",children:p?e.jsxs("div",{className:"flex",children:[e.jsx(u,{className:"mr-2 bg-green-100 hover:text-white hover:bg-green-800",onClick:A,icon:e.jsx(le,{}),name:"Save",disabled:M}),e.jsx(u,{className:"mr-2 bg-red-100 hover:text-white hover:bg-red-800",onClick:O,icon:e.jsx(re,{}),name:"Cancel"})]}):e.jsx("div",{className:"flex",children:e.jsx(u,{className:"bg-white hover:bg-gray-800 hover:text-white",onClick:L,icon:e.jsx(T,{}),name:"Edit"})})}),!(s!=null&&s.data)||s.data.length===0?e.jsx("div",{className:"m-14 sm:m-48 text-xl font-thin text-center",children:"No Organizations Found"}):e.jsxs("div",{className:"grid lg:grid-cols-4 sm:grid-cols-2 grid-cols-1 gap-4 p-5",children:[s.data.map(t=>e.jsx(ae,{edit:p,visible:h[t.orgID],setVisible:l=>{f(a=>({...a,[t.orgID]:l}))},organization:t},t.orgID)),e.jsx("div",{className:"fixed w-screen bottom-0 left-0 right-0 pl-8 sm:pl-24 pr-10 pb-3 flex justify-center",children:e.jsx(J,{page:s})})]})]})})})]})}export{Ee as default};
