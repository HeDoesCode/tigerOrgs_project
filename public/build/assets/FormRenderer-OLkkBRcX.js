import{j as e,r as g,q as N,W as y}from"./app-SnGaZ4z9.js";import{A as v}from"./AdminAlertDialog-BlBu2XRu.js";function w({item:s,value:r,onChange:l}){switch(h(s.name),s.type){case"text":case"email":case"number":return e.jsx(k,{type:s.type,name:s.name,required:s.required,value:r||"",onChange:l});case"file_upload":return e.jsx(F,{name:s.name,required:s.required,onChange:l,accept:".pdf,.doc,.docx"});case"image_upload":return e.jsx(C,{name:s.name,required:s.required,onChange:l,allowedTypes:s.allowedTypes||["image/jpeg","image/png"]});case"checkbox":return e.jsx(S,{name:s.name,options:s.options,required:s.required,value:r?typeof r=="string"?JSON.parse(r):r:[],onChange:l});case"select":case"radio":return e.jsx(A,{type:s.type,name:s.name,options:s.options,required:s.required,value:r||"",onChange:l});default:return null}}function h(s){return s.toLowerCase().trim().replaceAll(" ","_")}function k({type:s,name:r,required:l,value:t,onChange:n}){const i=h(r);return e.jsxs("li",{className:"mb-4",children:[e.jsxs("label",{htmlFor:i,className:"block mb-1",children:[r,l&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:s,className:"w-full px-3 py-2 bg-transparent border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",id:i,name:i,required:l,value:t,onChange:d=>n(d.target.value)})]})}function F({name:s,required:r,onChange:l,accept:t}){const n=h(s),i=d=>{const c=d.target.files[0];c&&l(c)};return e.jsxs("li",{className:"mb-4",children:[e.jsxs("label",{htmlFor:n,className:"block font-medium text-gray-700 mb-1",children:[s,r&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:"file",className:"w-full px-3 py-2 text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",id:n,name:n,required:r,accept:t,onChange:i})]})}function C({name:s,required:r,onChange:l,allowedTypes:t}){const[n,i]=g.useState(null),[d,c]=g.useState(""),m=h(s),f=5,b=f*1024*1024,o=a=>{const u=a.target.files[0];if(c(""),i(null),!u)return;if(!t.includes(u.type)){c(`Invalid file type. Please upload a ${t.map(p=>p.split("/")[1]).join(" or ")} file.`),a.target.value="";return}if(u.size>b){c(`File size must be less than ${f}MB`),a.target.value="";return}const x=new FileReader;x.onloadend=()=>{i(x.result),l(u)},x.readAsDataURL(u)};return e.jsxs("li",{className:"mb-4",children:[e.jsxs("label",{htmlFor:m,className:"block mb-1",children:[s,r&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",className:"w-full px-3 py-2 text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",id:m,name:m,required:r,accept:t.join(","),onChange:o}),d&&e.jsx("p",{className:"text-sm text-red-600",children:d}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Max file size: ",f,"MB. Accepted formats:"," ",t.map(a=>a.split("/")[1].toUpperCase()).join(", ")]}),n&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:n,alt:"Preview",className:"max-w-xs h-auto rounded-lg border border-gray-200"})})]})]})}function S({name:s,options:r,required:l,value:t=[],onChange:n}){const i=h(s),[d,c]=g.useState(!1),m=Array.isArray(t)?t.map(b=>h(b)):[],f=b=>{const{value:o,checked:a}=b.target;let u;if(a)u=[...m,o];else{if(m.length===1&&l){c(!0);return}u=m.filter(x=>x!==o)}c(l&&u.length===0),n(u.map(x=>r.find(p=>h(p)===x)||x).map(x=>h(x)))};return e.jsx("li",{className:"mb-4",children:e.jsxs("fieldset",{children:[e.jsxs("legend",{className:"block font-medium text-gray-700 mb-1",children:[s,l&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("div",{className:"space-y-2",children:r.map((b,o)=>{const a=h(b);return e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:i,id:`${i}-${o}`,value:a,checked:m.includes(a),onChange:f,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("label",{htmlFor:`${i}-${o}`,className:"ml-2 block text-gray-700",children:b})]},o)})}),d&&e.jsx("p",{className:"text-sm text-red-600",children:"Please select at least one option."})]})})}function A({type:s,name:r,options:l,required:t,value:n,onChange:i}){const d=h(r);return s==="select"?e.jsxs("li",{className:"mb-4",children:[e.jsxs("label",{htmlFor:d,className:"block font-medium text-gray-700 mb-1",children:[r,t&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("select",{className:"w-full px-3 py-2 bg-transparent border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",name:d,id:d,value:n,onChange:c=>i(c.target.value),required:t,children:[t?e.jsx("option",{value:"",disabled:!0,children:"Please select an option"}):e.jsx("option",{value:"",children:"No option selected"}),l.map((c,m)=>e.jsx("option",{value:h(c),children:c},m))]})]}):s==="radio"?e.jsx("li",{className:"mb-4",children:e.jsxs("fieldset",{children:[e.jsxs("legend",{className:"font-medium text-gray-700 mb-1",children:[r,t&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"space-y-2",children:[!t&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:d,id:`${r}-none`,value:"",checked:n==="",onChange:c=>i(c.target.value),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("label",{htmlFor:`${r}-none`,className:"ml-2 block text-gray-700",children:"No Option Selected"})]}),l.map((c,m)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:d,id:`${r}-${m}`,value:h(c),checked:n===h(c),onChange:f=>i(f.target.value),required:t,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("label",{htmlFor:`${r}-${m}`,className:"ml-2 block text-gray-700",children:c})]},m))]})]})}):null}function M({formLayout:s,orgID:r,formID:l}){const{errors:t,flash:n}=N().props,{data:i,setData:d,post:c,reset:m}=y({userData:{},formLayout:s,orgID:r,formID:l});g.useEffect(()=>{var o;if((o=n==null?void 0:n.old)!=null&&o.userData){const a=n.old.userData,u={};s.layout.forEach(x=>{const p=j(x.name);if(a[p]!==void 0)if(x.type==="checkbox")try{u[p]=typeof a[p]=="string"?JSON.parse(a[p]):a[p]}catch{u[p]=a[p]}else u[p]=a[p]}),d("userData",u)}},[n==null?void 0:n.old,s]);function f(o,a){d("userData",{...i.userData,[o]:a})}function b(o){o.preventDefault(),c(route("formSubmission",{orgID:r,formID:l}),{preserveState:!0,preserveScroll:!0,onError:a=>{console.error("Form submission errors:",a)}})}return e.jsx("div",{className:"min-h-screen py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("form",{className:"bg-white shadow-md rounded-lg overflow-hidden",onSubmit:b,children:[e.jsxs("div",{className:"px-6 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:s.name}),s.desc&&e.jsx("p",{className:"text-gray-600 mb-8",children:s.desc}),Object.keys(t).length>0&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"font-medium text-red-800",children:"There were errors with your submission"}),e.jsx("ul",{className:"mt-2 text-red-700 list-disc list-inside",children:Object.keys(t).map((o,a)=>e.jsx("li",{children:t[o]},a))})]})]})}),e.jsx("ul",{className:"space-y-6",children:s.layout.map((o,a)=>e.jsx(w,{item:o,value:i.userData[j(o.name)],onChange:u=>f(j(o.name),u)},a))})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 flex justify-between",children:[e.jsx(v,{trigger:e.jsx("div",{type:"reset",className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Clear Form"}),title:"Are you sure you want to reset all the inputs in the form?",accept:"Confirm",onclick:()=>m()}),e.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent font-medium rounded-md shadow-sm text-white bg-[#04aa6dd5] hover:bg-[#04AA6D] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Submit"})]})]})})})}function j(s){return s.toLowerCase().trim().replaceAll(" ","_")}export{M as F};
