import{j as e,r as p,Y as D,q as I,y as C}from"./app-DJjvf1D5.js";import{A as R}from"./AdminLayout-Cdt8TBpI.js";import{M as F}from"./MainAdminFrame-E_1AuHua.js";import{I as L}from"./IconCheckBox-CtfuhV_G.js";import{I as _,a as z}from"./IconStars-CgtWimfm.js";import{A as v}from"./AdminDialog--4u_1nJA.js";import{S as B,a as E,b as V,c as U,d as j}from"./select-nW8MbMoR.js";import{A as $,a as T,b as q,c as O}from"./accordion-CgbZc6a8.js";import"./IconMenu3-HEwZzqcv.js";import"./createLucideIcon-D7r5aWFk.js";import"./utils-iBxDxxOx.js";import"./Logo-BDpSYOwp.js";import"./index-BfCmCTf-.js";import"./button-DK7jQjHP.js";import"./dialog-BIACXeui.js";import"./index-Cqx5X468.js";import"./index-lRa8n4VH.js";import"./index-nfmUQT-U.js";import"./index-C_xUWuVg.js";import"./index-BeeK6TKq.js";function H({size:s}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:s||"24",height:s||"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-dots-vertical",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),e.jsx("path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),e.jsx("path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})}function P({onClick:s,className:t}){return e.jsx("div",{className:`grid content-center ${t}`,onClick:s,children:e.jsx("div",{className:"justify-self-center",children:e.jsx("div",{className:"size-8 hover:bg-gray-300 flex justify-center items-center rounded-full",children:e.jsx(H,{})})})})}const G=({item:s,orgID:t})=>{const r=()=>{if(!s.value)return e.jsx("span",{className:"text-gray-500",children:"No response"});switch(s.type){case"text":case"email":case"number":case"select":case"radio":return e.jsx("span",{className:"text-gray-700",children:s.value});case"checkbox":return e.jsx("div",{className:"space-y-1",children:Array.isArray(s.value)&&s.value.map((c,i)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-4 w-4 text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsx("span",{className:"ml-2 text-gray-700",children:c})]},i))});case"image_upload":return typeof s.value=="object"&&s.value.file_path?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"relative w-full max-w-md rounded-lg overflow-hidden border border-gray-200",children:e.jsx("img",{src:`/admin/${t}/file/view/${encodeURIComponent(s.value.file_path)}`,alt:s.value.original_filename,className:"w-full h-auto object-cover"})}),e.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[e.jsxs("p",{children:["Original filename:"," ",s.value.original_filename]}),e.jsxs("p",{children:["Size: ",N(s.value.file_size)]}),e.jsxs("p",{children:["Uploaded:"," ",new Date(s.value.uploaded_at).toLocaleString()]})]})]}):e.jsx("span",{className:"text-gray-500",children:"No image uploaded"});case"file_upload":return typeof s.value=="object"&&s.value.file_path?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),e.jsx("a",{href:`/admin/${t}/file/view/${encodeURIComponent(s.value.file_path)}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:s.value.original_filename})]}),e.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[e.jsxs("p",{children:["Size: ",N(s.value.file_size)]}),e.jsxs("p",{children:["Type: ",s.value.mime_type]}),e.jsxs("p",{children:["Uploaded:"," ",new Date(s.value.uploaded_at).toLocaleString()]})]})]}):e.jsx("span",{className:"text-gray-500",children:"No file uploaded"});default:return e.jsx("span",{className:"text-gray-500",children:"Unsupported response type"})}};return e.jsx("li",{className:"border-b border-gray-200 py-4 last:border-b-0",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:[s.name,s.required==="1"&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("div",{className:"ml-4",children:r()})]})})},N=s=>{if(s===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],c=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,c)).toFixed(2))+" "+r[c]};function K({item:s,orgID:t}){return e.jsx(G,{item:s,orgID:t})}function ue({orgID:s,formsWithApplications:t}){var m,x;const[r,c]=p.useState(null),i=l=>{c(l)},a=t.find(l=>l.formID===r),u=((m=a==null?void 0:a.applications)==null?void 0:m.length)>0;return e.jsxs("div",{className:"w-full",children:[e.jsx(D,{title:"Admin Dashboard"}),e.jsx(R,{orgID:s,children:e.jsx(F,{navItems:[{icon:e.jsx(L,{}),label:"Student Applications",link:"admin.applications",params:{orgID:s}},{icon:e.jsx(_,{}),label:"Recruitment Form",link:"admin.forms",params:{orgID:s}},{icon:e.jsx(z,{}),label:"Manage Criteria",link:"admin.criteria.index",params:{orgID:s}}],title:"Manage Student Applications",children:t.length>0?e.jsx("div",{className:"",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 divide-x divide-gray-200",children:[e.jsxs("div",{className:"col-span-5 md:col-span-3 mb-6",children:[e.jsx("div",{className:"hidden sm:block poppins p-5",children:"Forms Available:"}),e.jsx("div",{className:"hidden sm:block h-[500px] overflow-auto",children:t.map(l=>{var o,d;return e.jsx(b,{formID:l.formID,name:(o=l.formLayout)==null?void 0:o.name,applicationCount:((d=l.applications)==null?void 0:d.length)||0,selected:r===l.formID,onSelect:()=>i(l.formID)},l.formID)})}),e.jsx($,{type:"single",collapsible:!0,children:e.jsxs(T,{value:"item-1",children:[e.jsx(q,{className:"text-left p-5 flex sm:hidden",children:"Forms Available"}),e.jsx(O,{children:e.jsx("ul",{className:"bg-transparent flex flex-col pt-2 rounded-md space-y-1",children:t.map(l=>{var o,d;return e.jsx(b,{formID:l.formID,name:(o=l.formLayout)==null?void 0:o.name,applicationCount:((d=l.applications)==null?void 0:d.length)||0,selected:r===l.formID,onSelect:()=>i(l.formID)},l.formID)})})})]})})]}),e.jsxs("div",{className:"col-span-1 md:col-span-9 grid-cols-1 min-h-[500px]",children:[e.jsx("div",{className:"poppins col-span-1",children:e.jsxs("h1",{className:"p-5",children:["Application Responses for the form"," ",e.jsx("span",{className:"underline underline-offset-2",children:((x=a==null?void 0:a.formLayout)==null?void 0:x.name)||"Select a form"}),":"]})}),a&&u?e.jsx("div",{className:"grid grid-cols-1 min-h-[500px] h-[500px] overflow-auto",children:e.jsxs("table",{className:"mr-5 ml-5 sm:ml-0 sm:mr-3 bg-white divide-y min-h-[500px] rounded-r-xl rounded-l-xl sm:rounded-r-xl sm:rounded-l-none divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"hidden sm:grid grid-cols-1  sm:grid-cols-9 py-4 text-center ",children:[e.jsx("th",{className:"col-span-1 sm:col-span-2 text-sm",children:"Full Name"}),e.jsx("th",{className:"col-span-1 sm:col-span-2 text-sm",children:"College"}),e.jsx("th",{className:"col-span-1 sm:col-span-2 text-sm",children:"Email"}),e.jsx("th",{className:"col-span-1 sm:col-span-1 text-sm",children:"Date Submitted"}),e.jsx("th",{className:"col-span-1 sm:col-span-1 text-sm",children:"Similarity Score"}),e.jsx("th",{className:"col-span-1 sm:col-span-1 text-sm",children:"Actions"})]})}),e.jsx("tbody",{children:a.applications.map(l=>e.jsx(Y,{application:l,orgID:s,selectedFormId:r},l.applicationID))})]})}):e.jsx("div",{className:"m-14 sm:m-48 text-xl text-gray-600 font-thin text-center",children:a?"No Responses Found":"Select a form to view responses"})]})]})}):e.jsx("div",{children:e.jsx("div",{className:"m-14 sm:m-48 text-xl text-gray-600 font-thin text-center",children:"No Recruitment Form Found"})})})})]})}function b({formID:s,name:t,applicationCount:r,selected:c,onSelect:i}){return e.jsxs("div",{onClick:i,className:`cursor-pointer p-4 text-sm mr-5 ml-5 sm:mr-0 sm:ml-3 ${c?"bg-white":""} hover:bg-white flex justify-between items-center rounded-l-xl rounded-r-xl sm:rounded-r-none sm:rounded-l-xl`,children:[e.jsx("h1",{className:"font-extrabold",children:t}),e.jsx("div",{className:"ml-2 mr-2 rounded-full p-1 text-xs text-center font-bold bg-gray-300",children:r})]})}function Y({application:s,orgID:t,selectedFormId:r}){const{errors:c}=I().props,i=n=>new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"}),a=s.user,u=s.isMember,[m,x]=p.useState("accepted"),l=n=>{x(n)},[o,d]=p.useState(""),y=n=>{d(n)},[g,S]=p.useState(null),w=n=>{S(n)},[f,A]=p.useState(null),k=n=>{A(n)};function M(n){n.preventDefault(),C.patch(route("admin.setStatus",t),{formID:r,userID:g,applicationID:f,orgID:t,status:m,message:o},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{x("accepted"),d("")},onError:()=>{console.error("Save failed. Please try again.")}}),console.log(f),console.log(m),console.log(g),console.log(t),console.log(o),console.log(r)}return e.jsxs("tr",{className:"grid grid-cols-1 hover:bg-gray-100 sm:grid-cols-9 py-2 text-center min-h-16",children:[e.jsxs("td",{className:"col-span-1 sm:col-span-2 text-sm content-center",children:[a==null?void 0:a.firstname," ",a==null?void 0:a.lastname]}),e.jsx("td",{className:"col-span-1 sm:col-span-2 text-sm content-center",children:a==null?void 0:a.college}),e.jsx("td",{className:"col-span-1 sm:col-span-2 text-sm content-center truncate",children:a==null?void 0:a.email}),e.jsx("td",{className:"col-span-1 sm:col-span-1 text-sm content-center",children:i(s.created_at)}),e.jsx("td",{className:"col-span-1 sm:col-span-1 px-4 text-sm content-center",children:e.jsx("div",{className:"bg-gray-500 rounded-xl text-white",children:"90% Match"})}),u?e.jsx("td",{className:"col-span-1  px-2  grid-cols-1 text-sm font-bold grid content-center justify-self-center sm:grid-cols-1",children:e.jsx("div",{className:"bg-[#FFBC58] p-1 text-black rounded-xl",children:"Already a Member"})}):s.status==="accepted"?e.jsx("td",{className:"col-span-1  px-2  grid-cols-1 text-sm font-bold grid content-center justify-self-center sm:grid-cols-1",children:e.jsx("div",{className:"bg-green-400 p-1 text-black rounded-xl",children:"Application Accepted"})}):s.status==="rejected"?e.jsx("td",{className:"col-span-1  px-2  grid-cols-1 text-sm font-bold grid content-center justify-self-center sm:grid-cols-1",children:e.jsx("div",{className:"bg-red-400 p-1 text-black rounded-xl",children:"Application Rejected"})}):e.jsxs("td",{className:"sm:col-span-1 grid-cols-2 text-sm grid sm:grid-cols-2",children:[e.jsx("div",{className:"col-span-1 sm:col-span-1 content-center justify-self-center",children:e.jsx(v,{title:"Answer of the Applicant",trigger:e.jsxs("div",{className:" justify-self-center underline content-center underline-offset-2",children:["View"," ",e.jsx("span",{className:"sm:hidden",children:"Response"})]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-md font-bold",children:"Applicant Details"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",a==null?void 0:a.firstname," ",a==null?void 0:a.lastname]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",a==null?void 0:a.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"College:"})," ",a==null?void 0:a.college]}),e.jsx("hr",{className:"my-4"}),e.jsx("h3",{className:"text-lg font-bold",children:"Application Answers"}),e.jsxs("div",{className:"px-6 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold  text-gray-900 mb-6",children:s.userData.name}),s.userData.desc&&e.jsx("p",{className:"text-gray-600  mb-8",children:s.userData.desc}),Object.keys(c).length>0&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"font-medium text-red-800",children:"There were errors with your submission"}),e.jsx("ul",{className:"mt-2 text-red-700 list-disc list-inside",children:Object.keys(c).map((n,h)=>e.jsx("li",{children:c[n]},h))})]})]})}),e.jsx("ul",{className:"space-y-6",children:s.userData.layout.map((n,h)=>e.jsx(K,{item:n,orgID:t},h))})]})]})})}),e.jsx("div",{className:"col-span-1 sm:col-span-1 content-center justify-self-center",children:e.jsx(v,{title:`Set the Status for Applicant ${a==null?void 0:a.firstname} ${a==null?void 0:a.lastname}`,trigger:e.jsx(P,{onClick:()=>{w(a==null?void 0:a.userID),k(s.applicationID)}}),children:e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700",children:"Select a Status to be Set for this Application:"}),e.jsxs(B,{defaultValue:s.status==="submitted"?"accepted":s.status,onValueChange:l,children:[e.jsx(E,{className:"w-full h-12 mb border-gray-300 bg-transparent",children:e.jsx(V,{placeholder:"Set Status"})}),e.jsxs(U,{className:"border-gray-500 bg-[#EEEEEE] quicksand",children:[e.jsx(j,{value:"accepted",children:"Mark as Accepted"}),e.jsx(j,{value:"pending",children:"Mark as Pending"}),e.jsx(j,{value:"rejected",children:"Mark as Rejected"})]})]}),e.jsx("label",{className:"block text-sm font-bold text-gray-700",children:"Attach a Message/Reason:"}),e.jsx("textarea",{className:"block w-full px-4 h-44 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:m==="pending"?"(This field is required)":"(Optional)",onChange:n=>y(n.target.value)})]}),e.jsx("div",{className:"mt-4 grid justify-items-end",children:e.jsx("button",{type:"submit",className:"flex px-9 shadow-lg rounded-2xl bg-white hover:bg-gray-800 hover:text-white",children:e.jsx("span",{className:"ml-2 poppins truncate sm:block",children:"Set Status"})})})]})})})]})]})}export{ue as default};
