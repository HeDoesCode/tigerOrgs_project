import{r as m,j as e,y,Y as E}from"./app-CQ1v4CXz.js";import{I as L}from"./IconMailFilled-ANlHdb86.js";import{U as $}from"./UserLayout-CtkuBJr0.js";import{D as B,a as T,b as U,c as W,d as H,e as Y,g as A}from"./dialog-DnTO6yaC.js";import{B as M}from"./button-DYTK1q6P.js";import O from"./InputContainer-BuFRM97R.js";import{I as J}from"./IconFileDownload-CK5yImla.js";import{A as R,b as q,c as P,d as V,e as _,f as G,g as Q,h as X}from"./alert-dialog-3BVQ5u_O.js";import{u as Z}from"./IconMenu3-C4gMQUm3.js";import"./IconProfile-oU0p8ZUI.js";import"./dropdown-menu-Cc23jRhD.js";import"./utils-aYM5bCtc.js";import"./index-DEyZLPC0.js";import"./index-CXnUhIzJ.js";import"./index-Xx_peI74.js";import"./index-BEgwai2j.js";import"./index-B8eaYLFf.js";import"./check-VgFVxUij.js";import"./createLucideIcon-_flAZbB2.js";import"./index-fG1OfbE1.js";import"./PrivacyPolicy-DXgBuK9f.js";import"./Logo-Cz12jA4C.js";function ee({keywords:r,className:n,activeUserKeywords:u}){r=d(r);function d(t){return t.sort((l,a)=>l.keyword.localeCompare(a.keyword))}const[i,w]=m.useState([]),[g,c]=m.useState([]),[p,h]=m.useState(!1);m.useEffect(()=>{f()},[]),m.useEffect(()=>{h(i!==u)},[i]);const f=()=>{w(u);const t=r.filter(l=>!u.some(a=>a.keyword===l.keyword));c(t)},[N,b]=m.useState(""),k=t=>{if(b(t.target.value),t.target.value===""||t.target.value===null){c(d(g));return}const l=g.filter(o=>o.keyword.toLowerCase().includes(t.target.value.toLowerCase())).sort((o,x)=>{const v=t.target.value.toLowerCase(),F=o.keyword.toLowerCase(),z=x.keyword.toLowerCase(),I=F.startsWith(v)?0:1,K=z.startsWith(v)?0:1;return I!==K?I-K:F.indexOf(v)-z.indexOf(v)||F.localeCompare(z)}),a=g.filter(o=>!o.keyword.toLowerCase().includes(t.target.value.toLowerCase())).sort((o,x)=>o.keyword.localeCompare(x.keyword));c([...l,...a])},C=t=>{const l=d([...i,t]);w(l),c(a=>a.filter(o=>o.keyID!==t.keyID))},S=t=>{const l=[t,...g];c(d(l)),w(a=>a.filter(o=>o.keyID!==t.keyID))},j=()=>{y.patch(route("update.user.keywords"),{activeKeywords:i})};return e.jsxs("div",{className:`w-full flex flex-wrap gap-2 min-h-10 border-[1px] rounded-md p-2 relative text-xs overflow-clip group ${n}`,children:[e.jsxs(B,{children:[e.jsx(T,{className:"absolute size-full inset-0",children:e.jsxs("div",{className:"size-full flex items-center justify-center invisible group-hover:visible group-hover:!bg-gray-800/70 text-black/0 group-hover:!text-white transition-all duration-200 ease-in-out",children:[i&&"Edit"||"Add","Â Keyword Filters"]})}),e.jsxs(U,{className:"sm:max-w-[32rem] !h-fit max-h-[90%] w-[90%] sm:h-auto overflow-y-auto select-none",children:[e.jsxs(W,{children:[e.jsx(H,{children:"Add/Remove Keyword Filters"}),e.jsxs(Y,{className:"!-mb-3",children:["Filter organizations by adding or removing keywords. Save changes when you're done.",e.jsxs("span",{className:`text-red-500 font-bold ${p?"visible":"invisible"}`,children:[e.jsx("br",{}),"You have unsaved changes."]})]})]}),e.jsxs("div",{className:"flex gap-x-3",children:[e.jsx("input",{className:"w-full rounded-md",type:"text",autoComplete:"off",placeholder:"Find Keywords...",name:"keyword_filter",onChange:k,value:N}),e.jsx("button",{onClick:f,className:"h-full px-3 border border-black rounded-md hover:bg-gray-800 hover:text-white transition-all",children:"Reset"})]}),e.jsxs("div",{className:"w-full flex flex-wrap justify-center sm:justify-start min-h-8 h-fit gap-2 border-[1px] rounded-md border-gray-800 p-2 relative text-xs overflow-clip",children:[i.length!==0&&i.map((t,l)=>e.jsx(s,{name:t.keyword,remove:!0,onClick:()=>S(t)},l)),i.length===0&&e.jsx("div",{className:"pl-1 h-8 flex items-center",children:"(No Keywords Selected)"})]}),e.jsxs("div",{className:"flex justify-center items-center relative h-10",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-up",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M12 5l0 14"}),e.jsx("path",{d:"M18 11l-6 -6"}),e.jsx("path",{d:"M6 11l6 -6"})]}),e.jsx("div",{className:"absolute right-0 h-full",children:p&&e.jsx(A,{asChild:!0,children:e.jsx(M,{type:"button",className:"bg-transparent hover:!bg-gray-800 text-black hover:!text-white border border-black w-fit",onClick:j,children:"Update"})})})]}),e.jsx("div",{className:"w-full flex flex-wrap justify-center sm:justify-start gap-2 border-[1px] rounded-md border-gray-300 p-2 relative text-xs",children:g.map((t,l)=>e.jsx(s,{name:t.keyword,add:!0,onClick:()=>C(t)},l))}),p&&e.jsx(A,{asChild:!0,children:e.jsxs("div",{className:"w-full flex justify-end space-x-3",children:[e.jsx("div",{className:"text-red-500 font-bold my-auto",children:"You have unsaved changes."}),e.jsx(M,{type:"button",className:"bg-transparent hover:!bg-gray-800 text-black hover:!text-white border border-black w-fit",onClick:j,children:"Update"})]})})]})]}),u.length!==0?u.map((t,l)=>e.jsx(D,{name:t.keyword},l)):e.jsx("div",{className:"text-gray-500 my-auto flex items-center",children:"(None Selected. We'll use this to recommend organizations to you.)"})]});function D({name:t}){return e.jsx("div",{className:"w-min px-2 py-1 bg-[#ffb700] border border-gray-300 h-fit rounded-md cursor-pointer whitespace-nowrap",children:t})}function s({name:t,remove:l,add:a,...o}){return e.jsxs("button",{...o,className:`select-none w-min px-2 py-1 ${a&&"bg-gray-200"} ${l&&"bg-[#ffb700]"} border border-gray-300 h-8 rounded-md space-x-2 flex items-center ${a&&"hover:bg-gray-300"} ${l&&"hover:bg-[#e6a70b]"} group`,children:[e.jsx("span",{className:"whitespace-nowrap",children:t}),e.jsxs("div",{className:"h-5 aspect-square text-gray-400",children:[l&&e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"currentColor",className:"icon icon-tabler icons-tabler-filled icon-tabler-circle-x text-black/70",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M17 3.34a10 10 0 1 1 -14.995 8.984l-.005 -.324l.005 -.324a10 10 0 0 1 14.995 -8.336zm-6.489 5.8a1 1 0 0 0 -1.218 1.567l1.292 1.293l-1.292 1.293l-.083 .094a1 1 0 0 0 1.497 1.32l1.293 -1.292l1.293 1.292l.094 .083a1 1 0 0 0 1.32 -1.497l-1.292 -1.293l1.292 -1.293l.083 -.094a1 1 0 0 0 -1.497 -1.32l-1.293 1.292l-1.293 -1.292l-.094 -.083z"})]}),a&&e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"currentColor",className:"icon icon-tabler icons-tabler-filled icon-tabler-circle-plus",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M4.929 4.929a10 10 0 1 1 14.141 14.141a10 10 0 0 1 -14.14 -14.14zm8.071 4.071a1 1 0 1 0 -2 0v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0 -2h-2v-2z"})]})]})]})}}function te({size:r,...n}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r||"24",height:r||"24",viewBox:"0 0 24 24",fill:(n==null?void 0:n.fill)||"none",stroke:(n==null?void 0:n.stroke)||"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`icon icon-tabler icons-tabler-outline icon-tabler-circle-minus ${n==null?void 0:n.className}`,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),e.jsx("path",{d:"M9 12l6 0"})]})}function ke({user:r,activeUserKeywords:n,keywords:u,followedOrgs:d=[]}){const{toast:i}=Z(),w=`${r.lastname}, ${r.firstname}
    ${r.middlename?` ${r.middlename[0]}.`:""}`,g=r.section!=null?null:"Specify Section",[c,p]=m.useState([...d]),[h,f]=m.useState(!1),[N,b]=m.useState(!1),k=()=>{if(JSON.stringify(c)===JSON.stringify(d)){f(!1);return}const s=d.map(({orgID:a})=>a),t=c.map(({orgID:a})=>a),l=s.filter(a=>!t.includes(a));y.patch(route("update.user.follows"),l,{onSuccess:()=>{f(!1),i({title:"Unfollow Organizations Success",description:"Successfully unfollowed organization/s.",variant:"success",duration:3e3})},onError:()=>i({title:"Unfollow Organizations Failed",description:"An error occurred while updating your followed organizations.",variant:"destructive",duration:4e3})})},C=s=>{y.get(route("organizations.home",s))},S=s=>{p(t=>t.filter(a=>a.orgID!==s))};return e.jsxs("div",{className:"w-full",children:[e.jsx(E,{title:"Profile"}),e.jsxs($,{children:[e.jsxs("div",{className:"w-full poppins text-lg md:text-xl font-bold mt-3 mb-5",children:["Manage ",e.jsx("span",{className:"text-[#ffb700]",children:"Profile"})]}),e.jsxs("div",{className:"mt-4 w-full flex flex-col items-center px-5 gap-6",children:[e.jsxs("div",{className:"w-full max-w-[65rem] flex flex-col items-center drop-shadow shadow-black rounded-[2rem] space-y-3 bg-[#F4F4F4] border border-gray-300",children:[e.jsxs("div",{className:"h-28 sm:h-36 w-full flex flex-col justify-center px-12 space-y-3 bg-[#ffd875] rounded-[2rem]",children:[e.jsx("span",{className:"poetsen-one text-xl sm:text-3xl uppercase ",children:w}),e.jsxs("div",{className:"flex gap-x-3 text-sm sm:textbase",children:[e.jsx("div",{className:"hidden sm:contents",children:e.jsx(L,{})}),e.jsx("span",{children:r.email})]})]}),e.jsxs("div",{className:"w-full rounded-[2rem] bg-[#F0F0F0] drop-shadow border border-gray-300 p-8",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:[e.jsxs("div",{className:"",children:["ID Number:",e.jsx("div",{className:"text-lg font-semibold",children:r.userID})]}),e.jsxs("div",{className:"",children:["Affiliation:",e.jsx("div",{className:"text-lg font-semibold ",children:r.college})]}),e.jsxs("div",{className:"",children:["Stakeholder Category:",e.jsx("div",{className:"text-lg font-semibold ",children:r.status})]}),e.jsx(D,{})]}),e.jsx("div",{className:"mt-10",children:e.jsx(O,{title:"Interests",className:"min-h-11",children:e.jsx(ee,{activeUserKeywords:n,keywords:u})})})]})]}),e.jsxs("div",{className:"w-full max-w-[65rem] drop-shadow shadow-black rounded-[2rem] p-8 bg-[#F4F4F4] border border-gray-300",children:[e.jsxs("div",{className:"w-full flex justify-between mb-5 gap-x-2",children:[e.jsx("span",{className:"font-bold mb-4",children:"Your followed organizations:"}),d.length!==0&&e.jsxs("div",{className:"h-10 flex gap-x-4 items-center",children:[e.jsx("span",{className:"text-sm hidden sm:block text-slate-400/80 italic",children:h&&"Click to unfollow"}),e.jsx("button",{className:`px-2 select-none py-1 text-center w-20 rounded-md h-full ${h?"bg-sky-400":"bg-amber-500 hover:bg-amber-400 transition-colors"}`,onClick:h?()=>{if(JSON.stringify(c)===JSON.stringify(d)){f(!1);return}b(!0)}:()=>f(!0),children:h?"Save":"Edit"}),e.jsx(R,{open:N,onOpenChange:s=>b(s),children:e.jsxs(q,{children:[e.jsxs(P,{children:[e.jsx(V,{children:"Confirm unfollowing organization/s."}),e.jsx(_,{children:"You may still strong them again later."})]}),e.jsxs(G,{children:[e.jsx(Q,{children:"Cancel"}),e.jsx(X,{onClick:k,children:"Continue"})]})]})})]})]}),e.jsxs("div",{className:"w-full grid sm:grid-cols-[repeat(auto-fill,_minmax(15rem,1fr))] gap-4",children:[c.map((s,t)=>e.jsx(j,{org:s},t)),c.length==0&&e.jsx("span",{className:"text-sm text-slate-400/80 italic",children:"No followed organizations..."})]})]}),e.jsxs("div",{className:"p-5 grid max-w-[65rem] gridcol drop-shadow shadow-black rounded-[2rem] bg-[#F4F4F4] col-span-12 lg:col-span-7 w-full border border-gray-300",children:[e.jsx("h1",{className:"font-bold",children:"User Manual - Users"}),e.jsx("div",{className:"flex items-center mt-2 hover:scale-[1.01] transition-all duration-300 ease-in-out",children:e.jsxs("button",{className:"cursor-pointer w-full flex items-center justify-between rounded-xl bg-[#D9D9D9] text-black px-4 py-2 shadow-md",onClick:()=>window.location.href=route("download",["manual"]),children:[e.jsx("span",{children:"Download Manual"}),e.jsx(J,{})]})})]})]})]})]});function j({org:s}){return e.jsxs("button",{className:"flex items-center gap-x-3 hover:bg-slate-800 py-2 rounded-lg hover:text-white text-black bg-transparent transition-all",onClick:h?()=>S(s.orgID):()=>C(s.orgID),children:[e.jsx("div",{children:e.jsx(te,{fill:"#ef4444",stroke:"white",size:"27",className:h?"block ml-3":"hidden"})}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx("img",{src:`storage/logo/${s.logo}`,className:"aspect-square rounded-full size-12"}),e.jsx("div",{className:"flex-1 line-clamp-2 leading-5 text-left",children:s.name})]})]})}function D(){const[s,t]=m.useState(r.section||""),l=x=>{t(x.target.value)},a=x=>{x.key==="Enter"&&o(s)},o=x=>{x===""||s===r.section||y.patch(route("update.user.section"),{section:x})};return e.jsx(O,{title:"Section",error:g||s!==r.section?"Unsaved":"",children:e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"text",maxLength:10,placeholder:"[YEAR]-[SECTION] ex. 3-ITG",className:"w-full rounded-l-lg focus:border-black border-transparent",value:s,onChange:l,onKeyDown:a}),s!==r.section&&e.jsx("button",{className:"px-3 border-l border-l-gray-200",onClick:()=>t(r.section||""),children:"Cancel"}),e.jsx("button",{className:`rounded-r-lg border-l border-l-gray-200 px-3 ${s!==r.section?"hover:bg-black/5 text-black":"cursor-not-allowed text-gray-500"}`,disabled:s===r.section,onClick:()=>o(s),children:"Save"})]})})}}export{ke as default};
