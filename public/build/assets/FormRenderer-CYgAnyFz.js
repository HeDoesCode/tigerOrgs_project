import{j as e,r as b,q as N,W as y}from"./app-DMBvuxJw.js";import{A as v}from"./AdminAlertDialog-Djv44nXd.js";function w({item:s,value:r,onChange:l}){switch(h(s.name),s.type){case"text":case"email":case"number":return e.jsx(k,{type:s.type,name:s.name,required:s.required,value:r||"",onChange:l});case"file_upload":return e.jsx(F,{name:s.name,required:s.required,onChange:l,accept:".pdf,.doc,.docx"});case"image_upload":return e.jsx(C,{name:s.name,required:s.required,onChange:l,allowedTypes:s.allowedTypes||["image/jpeg","image/png"]});case"checkbox":return e.jsx(A,{name:s.name,options:s.options,required:s.required,value:r?typeof r=="string"?JSON.parse(r):r:[],onChange:l});case"select":case"radio":return e.jsx(S,{type:s.type,name:s.name,options:s.options,required:s.required,value:r||"",onChange:l});default:return null}}function h(s){return s.toLowerCase().trim().replaceAll(" ","_")}function k({type:s,name:r,required:l,value:a,onChange:n}){const o=h(r);return e.jsxs("li",{className:"mb-4",children:[e.jsxs("label",{htmlFor:o,className:"block mb-1",children:[r,l&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:s,className:"w-full px-3 py-2 bg-transparent border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",id:o,name:o,required:l,value:a,onChange:c=>n(c.target.value)})]})}function F({name:s,required:r,onChange:l,accept:a}){const n=h(s),o=c=>{const t=c.target.files[0];t&&l(t)};return e.jsxs("li",{className:"mb-4",children:[e.jsxs("label",{htmlFor:n,className:"block font-medium text-gray-700 mb-1",children:[s,r&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:"file",className:"w-full px-3 py-2 text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",id:n,name:n,required:r,accept:a,onChange:o})]})}function C({name:s,required:r,onChange:l,allowedTypes:a}){const[n,o]=b.useState(null),[c,t]=b.useState(""),u=h(s),m=5,p=m*1024*1024,d=i=>{const x=i.target.files[0];if(t(""),o(null),!x)return;if(!a.includes(x.type)){t(`Invalid file type. Please upload a ${a.map(j=>j.split("/")[1]).join(" or ")} file.`),i.target.value="";return}if(x.size>p){t(`File size must be less than ${m}MB`),i.target.value="";return}const f=new FileReader;f.onloadend=()=>{o(f.result),l(x)},f.readAsDataURL(x)};return e.jsxs("li",{className:"mb-4",children:[e.jsxs("label",{htmlFor:u,className:"block mb-1",children:[s,r&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",className:"w-full px-3 py-2 text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",id:u,name:u,required:r,accept:a.join(","),onChange:d}),c&&e.jsx("p",{className:"text-sm text-red-600",children:c}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Max file size: ",m,"MB. Accepted formats:"," ",a.map(i=>i.split("/")[1].toUpperCase()).join(", ")]}),n&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:n,alt:"Preview",className:"max-w-xs h-auto rounded-lg border border-gray-200"})})]})]})}function A({name:s,options:r,required:l,value:a=[],onChange:n}){const[o,c]=b.useState(!1),t=m=>{const{value:p,checked:d}=m.target;let i;if(d)i=[...a,p];else{if(a.length===1&&l){c(!0);return}i=a.filter(x=>x!==p)}c(l&&i.length===0),n(i||[])},u=Array.isArray(a)?a:[];return e.jsx("li",{className:"mb-4",children:e.jsxs("fieldset",{children:[e.jsxs("legend",{className:"block font-medium text-gray-700 mb-1",children:[s,l&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("div",{className:"space-y-2",children:r.map((m,p)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:s,id:`${s}-${p}`,value:m,checked:u.includes(m),onChange:t,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("label",{htmlFor:`${s}-${p}`,className:"ml-2 block text-gray-700",children:m})]},p))}),o&&e.jsx("p",{className:"text-sm text-red-600",children:"Please select at least one option."})]})})}function S({type:s,name:r,options:l,required:a,value:n,onChange:o}){const c=h(r);return s==="select"?e.jsxs("li",{className:"mb-4",children:[e.jsxs("label",{htmlFor:c,className:"block font-medium text-gray-700 mb-1",children:[r,a&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("select",{className:"w-full px-3 py-2 bg-transparent border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",name:c,id:c,value:n,onChange:t=>o(t.target.value),required:a,children:[a?e.jsx("option",{value:"",disabled:!0,children:"Please select an option"}):e.jsx("option",{value:"",children:"No option selected"}),l.map((t,u)=>e.jsx("option",{value:h(t),children:t},u))]})]}):s==="radio"?e.jsx("li",{className:"mb-4",children:e.jsxs("fieldset",{children:[e.jsxs("legend",{className:"font-medium text-gray-700 mb-1",children:[r,a&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"space-y-2",children:[!a&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:c,id:`${r}-none`,value:"",checked:n==="",onChange:t=>o(t.target.value),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("label",{htmlFor:`${r}-none`,className:"ml-2 block text-gray-700",children:"No Option Selected"})]}),l.map((t,u)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:c,id:`${r}-${u}`,value:h(t),checked:n===h(t),onChange:m=>o(m.target.value),required:a,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("label",{htmlFor:`${r}-${u}`,className:"ml-2 block text-gray-700",children:t})]},u))]})]})}):null}function M({formLayout:s,orgID:r,formID:l}){const{errors:a,old:n}=N().props,{data:o,setData:c,post:t,reset:u}=y({userData:{},formLayout:s,orgID:r,formID:l});b.useEffect(()=>{if(n){const d={};s.layout.forEach(i=>{const x=g(i.name);n[x]!==void 0&&(d[x]=n[x])}),c("userData",d)}},[n,s,c]);function m(d,i){c("userData",{...o.userData,[d]:i})}function p(d){d.preventDefault(),t(route("formSubmission",{orgID:r,formID:l}),{preserveState:!0,preserveScroll:!0})}return e.jsx("div",{className:"min-h-screen py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("form",{className:"bg-white shadow-md rounded-lg overflow-hidden",onSubmit:p,children:[e.jsxs("div",{className:"px-6 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:s.name}),s.desc&&e.jsx("p",{className:"text-gray-600 mb-8",children:s.desc}),Object.keys(a).length>0&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"font-medium text-red-800",children:"There were errors with your submission"}),e.jsx("ul",{className:"mt-2 text-red-700 list-disc list-inside",children:Object.keys(a).map((d,i)=>e.jsx("li",{children:a[d]},i))})]})]})}),e.jsx("ul",{className:"space-y-6",children:s.layout.map((d,i)=>e.jsx(w,{item:d,value:o.userData[g(d.name)],onChange:x=>m(g(d.name),x)},i))})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 flex justify-between",children:[e.jsx(v,{trigger:e.jsx("div",{type:"reset",className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Clear Form"}),title:"Are you sure you want to reset all the inputs in the form?",accept:"Confirm",onclick:()=>u()}),e.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent font-medium rounded-md shadow-sm text-white bg-[#04aa6dd5] hover:bg-[#04AA6D] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Submit"})]})]})})})}function g(s){return s.toLowerCase().trim().replaceAll(" ","_")}export{M as F};
