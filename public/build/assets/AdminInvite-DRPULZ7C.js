import{j as e,W as C,r as f,Y as E,y as F}from"./app-z0Ll1fWW.js";import{A as T}from"./AdminLayout-DIm8G2Gj.js";import{M as R}from"./MainAdminFrame-Bv3DOoey.js";import{A as k,S as W}from"./Searchbar-BCOgrwbK.js";import{I as H,a as O}from"./IconProfile-DFiVAacM.js";import{D as P,a as V,b as q,g as v,d as Q}from"./dropdown-menu-BuoPldge.js";import{I as D}from"./IconEdit-6-NVJbOP.js";import{A as x}from"./AdminAlertDialog-zU6iduqY.js";import{A}from"./AdminDialog-DutOVyAX.js";import{I as b}from"./IconInvite-C5_gFWfI.js";import{V as U}from"./VerticalCard-B1ggjvbO.js";import"./dialog-D8fhZQEW.js";import"./IconMenu3-DEdhSHTX.js";import"./createLucideIcon-m8txhBx7.js";import"./utils-C7nsxWRZ.js";import"./Logo-e3pMWuIr.js";import"./index-CR6iuHtX.js";import"./button-gJuh-hI9.js";import"./IconSearch-ZSRDBjdf.js";import"./index-BUfNXDnb.js";import"./index-C_X4e9AQ.js";import"./index-Dtfvcykf.js";import"./alert-dialog-CNiM_j8u.js";import"./index-CW2E4G-7.js";function Y({size:t}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t||"24",height:t||"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-user-check",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0"}),e.jsx("path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4"}),e.jsx("path",{d:"M15 19l2 2l4 -4"})]})}function G({size:t}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t||"24",height:t||"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-vector-bezier",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M3 14m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),e.jsx("path",{d:"M17 14m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),e.jsx("path",{d:"M10 6m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),e.jsx("path",{d:"M10 8.5a6 6 0 0 0 -5 5.5"}),e.jsx("path",{d:"M14 8.5a6 6 0 0 1 5 5.5"}),e.jsx("path",{d:"M10 8l-6 0"}),e.jsx("path",{d:"M20 8l-6 0"}),e.jsx("path",{d:"M3 8m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),e.jsx("path",{d:"M21 8m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})}function J({size:t}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t||"24",height:t||"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-building-skyscraper",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M3 21l18 0"}),e.jsx("path",{d:"M5 21v-14l8 -4v18"}),e.jsx("path",{d:"M19 21v-10l-6 -4"}),e.jsx("path",{d:"M9 9l0 .01"}),e.jsx("path",{d:"M9 12l0 .01"}),e.jsx("path",{d:"M9 15l0 .01"}),e.jsx("path",{d:"M9 18l0 .01"})]})}function K({size:t}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t||"24",height:t||"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-mail",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z"}),e.jsx("path",{d:"M3 7l9 6l9 -6"})]})}function X({userID:t,orgID:l,roleID:n}){const{data:m,setData:h,post:c,processing:i}=C({userID:t}),o=r=>{c(route(`admin.${r}`,{orgID:l}),{preserveState:!0,preserveScroll:!0})};return e.jsxs(P,{children:[e.jsx(V,{className:"w-full",disabled:i,children:e.jsx(D,{})}),e.jsxs(q,{children:[n===2?e.jsx(v,{onSelect:r=>{r.preventDefault()},className:"bg-[#f8f8f8] border-gray-300 cursor-pointer",children:e.jsx(x,{trigger:"Make Member",title:"Demote the user as member?",description:"This will disable the user to manage the organization.",accept:"Confirm",onclick:()=>o("make-member")})}):e.jsx(v,{onSelect:r=>{r.preventDefault()},className:"bg-[#f8f8f8] border-gray-300 cursor-pointer",children:e.jsx(x,{trigger:"Make Admin",title:"Make the user as admin?",description:"This will enable the user to manage the organization.",accept:"Confirm",onclick:()=>o("make-admin")})}),e.jsx(Q,{}),e.jsx(v,{onSelect:r=>{r.preventDefault()},className:"bg-[#f8f8f8] border-gray-300 cursor-pointer",children:e.jsx(x,{trigger:"Remove Student",title:"Remove the user from the organization",description:"Are you sure you want to delete the user from the organization?",accept:"Confirm",onclick:()=>o("remove-student")})})]})]})}function S({name:t,position:l,college:n,email:m,userID:h,orgID:c,roleID:i,showActions:o=!0,admins:r,setAllAdmins:w,members:p,setAllMembers:N,allAdmins:y}){const u=i===2,M=i===1;return console.log(i),e.jsxs("div",{className:"hover:scale-[1.02] transition-all duration-300 ease-in-out shadow-lg hover:bg-gray-100 p-3 w-full bg-white rounded-xl",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsxs("div",{className:`${u?"bg-[#FF9900]":"bg-[#FFBC58]"} p-1 px-4 rounded-2xl flex justify-between items-center`,children:[e.jsx("div",{className:"mx-1 text-gray-800",children:e.jsx(Y,{})}),e.jsx("div",{className:"ml-2 poppins",children:u?"Admin":M?"Member":"Unknown"})]}),o&&e.jsx("div",{className:"flex",children:e.jsx("div",{className:"mx-1 text-gray-500 cursor-pointer",children:e.jsx(X,{userID:h,orgID:c,roleID:i})})})]}),e.jsxs("div",{className:"grid grid-cols-5 mb-1",children:[e.jsx("div",{className:"col-span-1 grid content-center justify-self-center text-gray-500",children:e.jsx(H,{})}),e.jsx("div",{className:"col-span-4 text-lg font-bold truncate",children:t})]}),e.jsxs("div",{className:"grid grid-cols-5 mb-1",children:[e.jsx("div",{className:"col-span-1 grid content-center justify-self-center text-gray-500",children:e.jsx(G,{})}),e.jsx("div",{className:"col-span-4 text-lg font-semibold truncate",children:l})]}),e.jsxs("div",{className:"grid grid-cols-5 mb-1",children:[e.jsx("div",{className:"col-span-1 grid content-center justify-self-center text-gray-500",children:e.jsx(J,{})}),e.jsx("div",{className:"col-span-4 text-md truncate",children:n})]}),e.jsxs("div",{className:"grid grid-cols-5 mb-1",children:[e.jsx("div",{className:"col-span-1 grid content-center justify-self-center text-gray-500",children:e.jsx(K,{})}),e.jsx("div",{className:"col-span-4 text-md truncate",children:m})]})]})}function Ne({members:t,admins:l,orgID:n,organizationName:m}){const[h,c]=f.useState(""),[i,o]=f.useState([]),r=async s=>{const a=s.target.value;if(c(a),a.length>0)try{const d=await axios.get(`/admin/${n}/search-users`,{params:{query:a}});o(d.data)}catch(d){console.error("Error fetching result:",d)}else o([])},w=s=>{console.log(n),console.log(p.userID),y(`/admin/${n}/addMember/${p.userID}`,{preserveState:!0,preserveScroll:!0})},{data:p,setData:N,post:y,processing:u,errors:M}=C({userID:"",orgID:n,roleID:1}),I=s=>{N("userID",s)},[g,$]=f.useState({orgID:n,message:""});function z(s){const a=s.target.id,d=s.target.value;$(B=>({...B,[a]:d}))}function L(s){s.preventDefault(),F.post(`/admin/${n}/makeAnnouncement`,g)}const j=1500;return e.jsxs("div",{className:"w-full",children:[e.jsx(E,{title:"Admin Dashboard"}),e.jsx(T,{orgID:n,children:e.jsx(R,{navItems:[{icon:e.jsx(D,{}),label:"Edit Page",link:"admin.editpage",params:{orgID:n}},{icon:e.jsx(b,{}),label:"Members",link:"admin.invite",params:{orgID:n}}],title:`Admin Management - ${m}`,children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-end me-5 mt-5 ",children:[e.jsx(A,{title:"Send Announcement",description:"Send Notification to the members of your Organization",trigger:e.jsx(k,{asChild:!0,className:"mr-2 sm:mt-0 py-2 bg-white hover:bg-gray-800 hover:text-white duration-300",icon:e.jsx(O,{}),name:"Send Announcement"}),children:e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"name",className:"block  font-medium text-gray-700",children:"Message:"}),e.jsx("textarea",{id:"message",value:g.message,onChange:z,maxLength:j,className:"block w-full px-4 h-44 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Type here your announcement",required:!0}),e.jsx("div",{className:"font-bold text-sm text-red-500",children:g.message.length==j&&`Max. length ${j} reached.`})]}),e.jsx("div",{className:"mt-4 grid justify-items-end",children:e.jsx("button",{type:"submit",className:"flex px-9  shadow-lg rounded-2xl bg-white hover:bg-gray-800 hover:text-white ",children:e.jsx("span",{className:"ml-2  poppins truncate sm:block",children:"Announce"})})})]})}),e.jsxs(A,{title:"Add Member Manually",description:"Search to add manually to the Organization",trigger:e.jsx(k,{asChild:!0,className:"mr-2 sm:mt-0 py-2 bg-white hover:bg-gray-800 hover:text-white duration-300",icon:e.jsx(b,{}),name:"Add Member Manually"}),children:[e.jsx(W,{value:h,onChange:r,placeholder:"Search by name or email"}),e.jsx("div",{children:i.map(s=>e.jsxs(U,{gridcol:"grid-col-1 md:grid-cols-4",children:[e.jsxs("div",{className:"text-sm font-bold content-center text-center",children:[s.firstname," ",s.lastname]}),e.jsx("div",{className:"truncate col-span-2 content-center text-sm font-semibold text-center",children:s.email}),e.jsx("div",{className:"sm px-4 text-sm content-center justify-self-center ",children:e.jsx(x,{trigger:e.jsxs("div",{role:"button",className:"mr-2 bg-white flex items-center justify-center px-9  shadow-lg rounded-2xl hover:bg-gray-800 hover:text-white",name:"Assign",onClick:()=>{I(s.userID)},children:[e.jsx(b,{}),e.jsx("span",{className:"ml-2 poppins hidden truncate sm:block",children:"Assign"})]}),title:`Add ${s.firstname} ${s.lastname} to the organization?`,description:"This adds the chosen user to the organization.",accept:"Confirm",onclick:w})})]},s.userID))})]})]}),e.jsx("div",{className:"pt-5 pl-5 flex justify-between",children:e.jsx("div",{className:"poppins",children:"Current Admin(s):"})}),e.jsx("div",{className:"grid lg:grid-cols-4 md:grid-cols-2 sm:grid-cols-1 gap-4 p-5",children:l.map((s,a)=>e.jsx(S,{isAdmin:!0,name:`${s.firstname} ${s.lastname}`,position:s.position||"Member",email:s.email||"No email available",college:s.college||"N/A",userID:s.userID,orgID:n,roleID:2},s.userID||`admin-${a}`))}),e.jsx("div",{className:"pt-5 pl-5 flex justify-between",children:e.jsx("div",{className:"poppins",children:"Other Members:"})}),e.jsx("div",{className:"grid lg:grid-cols-4 md:grid-cols-2 sm:grid-cols-1 gap-4 p-5",children:t.map((s,a)=>e.jsx(S,{isAdmin:!1,name:`${s.firstname} ${s.lastname}`,position:s.position||"Member",email:s.email||"No email available",college:s.college||"N/A",userID:s.userID,orgID:n,roleID:1},s.userID||`member-${a}`))})]})})})]})}export{Ne as default};
