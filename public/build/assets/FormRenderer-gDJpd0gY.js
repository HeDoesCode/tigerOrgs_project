import{j as e,r as b,q as j,y as N}from"./app-DNqcEfqS.js";function y({item:s}){let r;switch(s.type){case"text":case"email":case"number":r=e.jsx(w,{type:s.type,name:s.name,required:s.required});break;case"file_upload":r=e.jsx(k,{name:s.name,required:s.required,value:s.value,accept:".pdf,.doc,.docx"});break;case"image_upload":r=e.jsx(v,{name:s.name,required:s.required,value:s.value,allowedTypes:s.allowedTypes||["image/jpeg","image/png"]});break;case"checkbox":r=e.jsx(CheckboxInput,{name:s.name,options:s.options,required:s.required,value:Array.isArray(s.value)?s.value:[]});break;default:r=e.jsx(F,{type:s.type,name:s.name,options:s.options,required})}return r}function c(s){return s.toLowerCase().trim().replaceAll(" ","_")}function v({name:s,required:r,value:t,allowedTypes:a}){const[d,i]=b.useState(null),[l,n]=b.useState(""),o=c(s),u=5,h=u*1024*1024,f=m=>{const x=m.target.files[0];if(n(""),i(null),!x)return;if(!a.includes(x.type)){n(`Invalid file type. Please upload a ${a.map(g=>g.split("/")[1]).join(" or ")} file.`),m.target.value="";return}if(x.size>h){n(`File size must be less than ${u}MB`),m.target.value="";return}const p=new FileReader;p.onloadend=()=>{i(p.result)},p.readAsDataURL(x)};return e.jsxs("li",{className:"mb-4",children:[e.jsxs("label",{htmlFor:o,className:"block mb-1",children:[s,r&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",className:"w-full px-3 py-2 text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",id:o,name:o,required:r,accept:a.join(","),onChange:f}),l&&e.jsx("p",{className:"text-sm text-red-600",children:l}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Max file size: ",u,"MB. Accepted formats:"," ",a.map(m=>m.split("/")[1].toUpperCase()).join(", ")]}),d&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:d,alt:"Preview",className:"max-w-xs h-auto rounded-lg border border-gray-200"})})]})]})}function w({type:s,name:r,required:t}){let a=c(r);return e.jsxs("li",{className:"mb-4",children:[e.jsxs("label",{htmlFor:a,className:"block mb-1",children:[r,t&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:s,className:"w-full px-3 py-2 bg-transparent border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",id:a,name:a,required:t})]})}function k({name:s,required:r}){let t=c(s);return e.jsxs("li",{className:"mb-4",children:[e.jsxs("label",{htmlFor:t,className:"block font-medium text-gray-700 mb-1",children:[s,r&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:"file",className:"w-full px-3 py-2 text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",id:t,name:t,required:r})]})}function F({type:s,name:r,options:t,required:a}){let d=c(r),i;switch(s){case"select":i=e.jsxs("li",{className:"mb-4",children:[e.jsxs("label",{htmlFor:d,className:"block font-medium text-gray-700 mb-1",children:[r,a&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("select",{className:"w-full px-3 py-2 bg-transparent border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",name:d,id:d,children:t.map((l,n)=>e.jsx("option",{value:c(l),children:l},n))})]});break;case"radio":i=e.jsx("li",{className:"mb-4",children:e.jsxs("fieldset",{children:[e.jsxs("legend",{className:"font-medium text-gray-700 mb-1",children:[r,a&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("div",{className:"mt-2 space-y-2",children:t.map(l=>{const n=c(l);return e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:d,id:n,value:n,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("label",{htmlFor:n,className:"ml-2 block text-gray-700",children:l})]},n)})})]})});break}return i}function S({formLayout:s,orgID:r,formID:t}){const{errors:a}=j().props;function d(i){i.preventDefault();const l=new FormData(i.target),n={};for(const[o,u]of l.entries())n[o]=u;N.post(route("formSubmission",{orgID:r,formID:t}),{userData:n,formLayout:s,orgID:r,formID:t},{preserveState:!0,preserveScroll:!0}),console.log(n),console.log(l)}return e.jsx("div",{className:"min-h-screen py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("form",{className:"bg-white shadow-md rounded-lg overflow-hidden",onSubmit:d,children:[e.jsxs("div",{className:"px-6 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold  text-gray-900 mb-6",children:s.name}),s.desc&&e.jsx("p",{className:"text-gray-600  mb-8",children:s.desc}),Object.keys(a).length>0&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"font-medium text-red-800",children:"There were errors with your submission"}),e.jsx("ul",{className:"mt-2 text-red-700 list-disc list-inside",children:Object.keys(a).map((i,l)=>e.jsx("li",{children:a[i]},l))})]})]})}),e.jsx("ul",{className:"space-y-6",children:s.layout.map((i,l)=>e.jsx(y,{item:i},l))})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 flex justify-between",children:[e.jsx("button",{type:"reset",className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Clear Form"}),e.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent font-medium rounded-md shadow-sm text-white bg-[#04aa6dd5] hover:bg-[#04AA6D] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Submit"})]})]})})})}export{S as F};
