import{j as e,W as C,r as x,Y as T,y as O}from"./app-CQInpNgQ.js";import{A as R}from"./AdminLayout-DeKZTCQo.js";import{M as W}from"./MainAdminFrame-Dt7qwP29.js";import{A,S as H}from"./Searchbar-D4hRZjEj.js";import{I as P,a as V}from"./IconProfile-DRpu6Wnr.js";import{D as q,a as Q,b as U,g as b,d as Y}from"./dropdown-menu-xCdkR-rX.js";import{I}from"./IconEdit-BHXPe-Je.js";import{A as p}from"./AdminAlertDialog-Bx3khgjJ.js";import{A as S}from"./AdminDialog-BOz9ChvR.js";import{I as w}from"./IconInvite-BdsbvOTS.js";import{V as G}from"./VerticalCard-CQiNbAwI.js";import"./dialog-mqk8w3mJ.js";import"./IconMenu3-DCj-NclH.js";import"./createLucideIcon-YwrPxVrX.js";import"./PrivacyPolicy-DMYLtTzM.js";import"./Logo-B-jhm3Oe.js";import"./utils-4XAIA_N5.js";import"./index-5ahRPpTL.js";import"./index-DfOKCRti.js";import"./button-C0ns29cu.js";import"./IconSearch-CNtHv4hD.js";import"./index-ClzaujVi.js";import"./index-C3vg4LMP.js";import"./index-CmjSlatu.js";import"./check-OSRfxAJH.js";import"./alert-dialog-DClS1R-F.js";import"./index-DEHtWS_p.js";function J({size:t}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t||"24",height:t||"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-user-check",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0"}),e.jsx("path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4"}),e.jsx("path",{d:"M15 19l2 2l4 -4"})]})}function K({size:t}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t||"24",height:t||"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-vector-bezier",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M3 14m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),e.jsx("path",{d:"M17 14m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),e.jsx("path",{d:"M10 6m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),e.jsx("path",{d:"M10 8.5a6 6 0 0 0 -5 5.5"}),e.jsx("path",{d:"M14 8.5a6 6 0 0 1 5 5.5"}),e.jsx("path",{d:"M10 8l-6 0"}),e.jsx("path",{d:"M20 8l-6 0"}),e.jsx("path",{d:"M3 8m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),e.jsx("path",{d:"M21 8m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})}function X({size:t}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t||"24",height:t||"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-building-skyscraper",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M3 21l18 0"}),e.jsx("path",{d:"M5 21v-14l8 -4v18"}),e.jsx("path",{d:"M19 21v-10l-6 -4"}),e.jsx("path",{d:"M9 9l0 .01"}),e.jsx("path",{d:"M9 12l0 .01"}),e.jsx("path",{d:"M9 15l0 .01"}),e.jsx("path",{d:"M9 18l0 .01"})]})}function Z({size:t}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t||"24",height:t||"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-mail",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z"}),e.jsx("path",{d:"M3 7l9 6l9 -6"})]})}function _({userID:t,orgID:l,roleID:n}){const{data:m,setData:h,post:c,processing:o}=C({userID:t}),i=r=>{c(route(`admin.${r}`,{orgID:l}),{preserveState:!0,preserveScroll:!0})};return e.jsxs(q,{children:[e.jsx(Q,{className:"w-full",disabled:o,children:e.jsx(I,{})}),e.jsxs(U,{children:[n===2?e.jsx(b,{onSelect:r=>{r.preventDefault()},className:"bg-[#f8f8f8] border-gray-300 cursor-pointer",children:e.jsx(p,{trigger:"Make Member",title:"Demote the user as member?",description:"This will disable the user to manage the organization.",accept:"Confirm",onclick:()=>i("make-member")})}):e.jsx(b,{onSelect:r=>{r.preventDefault()},className:"bg-[#f8f8f8] border-gray-300 cursor-pointer",children:e.jsx(p,{trigger:"Make Admin",title:"Make the user as admin?",description:"This will enable the user to manage the organization.",accept:"Confirm",onclick:()=>i("make-admin")})}),e.jsx(Y,{}),e.jsx(b,{onSelect:r=>{r.preventDefault()},className:"bg-[#f8f8f8] border-gray-300 cursor-pointer",children:e.jsx(p,{trigger:"Remove Student",title:"Remove the user from the organization",description:"Are you sure you want to delete the user from the organization?",accept:"Confirm",onclick:()=>i("remove-student")})})]})]})}function D({name:t,position:l,college:n,email:m,userID:h,orgID:c,roleID:o,showActions:i=!0,admins:r,setAllAdmins:N,members:u,setAllMembers:y,allAdmins:M}){const g=o===2,k=o===1;return e.jsxs("div",{className:"hover:scale-[1.02] transition-all duration-300 ease-in-out shadow-lg hover:bg-gray-100 p-3 w-full bg-white rounded-xl",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsxs("div",{className:`${g?"bg-[#FF9900]":"bg-[#FFBC58]"} p-1 px-4 rounded-2xl flex justify-between items-center`,children:[e.jsx("div",{className:"mx-1 text-gray-800",children:e.jsx(J,{})}),e.jsx("div",{className:"ml-2 poppins",children:g?"Admin":k?"Member":"Unknown"})]}),i&&e.jsx("div",{className:"flex",children:e.jsx("div",{className:"mx-1 text-gray-500 cursor-pointer",children:e.jsx(_,{userID:h,orgID:c,roleID:o})})})]}),e.jsxs("div",{className:"grid grid-cols-5 mb-1",children:[e.jsx("div",{className:"col-span-1 grid content-center justify-self-center text-gray-500",children:e.jsx(P,{})}),e.jsx("div",{className:"col-span-4 text-lg font-bold truncate",children:t})]}),e.jsxs("div",{className:"grid grid-cols-5 mb-1",children:[e.jsx("div",{className:"col-span-1 grid content-center justify-self-center text-gray-500",children:e.jsx(K,{})}),e.jsx("div",{className:"col-span-4 text-lg font-semibold truncate",children:l})]}),e.jsxs("div",{className:"grid grid-cols-5 mb-1",children:[e.jsx("div",{className:"col-span-1 grid content-center justify-self-center text-gray-500",children:e.jsx(X,{})}),e.jsx("div",{className:"col-span-4 text-md truncate",children:n})]}),e.jsxs("div",{className:"grid grid-cols-5 mb-1",children:[e.jsx("div",{className:"col-span-1 grid content-center justify-self-center text-gray-500",children:e.jsx(Z,{})}),e.jsx("div",{className:"col-span-4 text-md truncate",children:m})]})]})}function Se({members:t,admins:l,orgID:n,organizationName:m}){const[h,c]=x.useState(""),[o,i]=x.useState([]),r=async s=>{const a=s.target.value;if(c(a),a.length>0)try{const d=await axios.get(`/admin/${n}/search-users`,{params:{query:a}});i(d.data)}catch(d){console.error("Error fetching result:",d)}else i([])},N=s=>{console.log(n),console.log(u.userID),M(`/admin/${n}/addMember/${u.userID}`,{preserveState:!0,preserveScroll:!0})},{data:u,setData:y,post:M,processing:g,errors:k}=C({userID:"",orgID:n,roleID:1}),$=s=>{y("userID",s)},[j,z]=x.useState({orgID:n,message:""}),[L,f]=x.useState(!1);function B(s){const a=s.target.id,d=s.target.value;z(F=>({...F,[a]:d}))}function E(s){s.preventDefault(),console.log("test"),f(!1),O.post(`/admin/${n}/makeAnnouncement`,j,{onSuccess:()=>f(!1)})}const v=1500;return e.jsxs("div",{className:"w-full",children:[e.jsx(T,{title:"Admin Dashboard"}),e.jsx(R,{orgID:n,children:e.jsx(W,{navItems:[{icon:e.jsx(I,{}),label:"Edit Page",link:"admin.editpage",params:{orgID:n}},{icon:e.jsx(w,{}),label:"Members",link:"admin.invite",params:{orgID:n}}],title:`Admin Management - ${m}`,children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-end me-5 mt-5 ",children:[e.jsx(S,{title:"Send Announcement",description:"Send Notification to the members of your Organization",trigger:e.jsx(A,{asChild:!0,className:"mr-2 sm:mt-0 py-2 bg-white hover:bg-gray-800 hover:text-white duration-300",icon:e.jsx(V,{}),name:"Send Announcement"}),open:L,onOpenChange:s=>f(s),children:e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"name",className:"block  font-medium text-gray-700",children:"Message:"}),e.jsx("textarea",{id:"message",value:j.message,onChange:B,maxLength:v,className:"block w-full px-4 h-44 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Type here your announcement",required:!0}),e.jsx("div",{className:"font-bold text-sm text-red-500",children:j.message.length==v&&`Max. length ${v} reached.`})]}),e.jsx("div",{className:"mt-4 grid justify-items-end",children:e.jsx("button",{type:"submit",className:"flex px-9  shadow-lg rounded-2xl bg-white hover:bg-gray-800 hover:text-white ",children:e.jsx("span",{className:"ml-2  poppins truncate sm:block",children:"Announce"})})})]})}),e.jsxs(S,{title:"Add Member Manually",description:"Search to add manually to the Organization",trigger:e.jsx(A,{asChild:!0,className:"mr-2 sm:mt-0 py-2 bg-white hover:bg-gray-800 hover:text-white duration-300",icon:e.jsx(w,{}),name:"Add Member Manually"}),children:[e.jsx(H,{value:h,onChange:r,placeholder:"Search by name or email"}),e.jsx("div",{children:o.map(s=>e.jsxs(G,{gridcol:"grid-col-1 md:grid-cols-4",children:[e.jsxs("div",{className:"text-sm font-bold content-center text-center",children:[s.firstname," ",s.lastname]}),e.jsx("div",{className:"truncate col-span-2 content-center text-sm font-semibold text-center",children:s.email}),e.jsx("div",{className:"sm px-4 text-sm content-center justify-self-center ",children:e.jsx(p,{trigger:e.jsxs("div",{role:"button",className:"mr-2 bg-white flex items-center justify-center px-9  shadow-lg rounded-2xl hover:bg-gray-800 hover:text-white",name:"Assign",onClick:()=>{$(s.userID)},children:[e.jsx(w,{}),e.jsx("span",{className:"ml-2 poppins hidden truncate sm:block",children:"Assign"})]}),title:`Add ${s.firstname} ${s.lastname} to the organization?`,description:"This adds the chosen user to the organization.",accept:"Confirm",onclick:N})})]},s.userID))})]})]}),e.jsx("div",{className:"pt-5 pl-5 flex justify-between",children:e.jsx("div",{className:"poppins",children:"Current Admin(s):"})}),e.jsx("div",{className:"grid lg:grid-cols-4 md:grid-cols-2 sm:grid-cols-1 gap-4 p-5",children:l.map((s,a)=>e.jsx(D,{isAdmin:!0,name:`${s.firstname} ${s.lastname}`,position:s.position||"Member",email:s.email||"No email available",college:s.college||"N/A",userID:s.userID,orgID:n,roleID:2},s.userID||`admin-${a}`))}),e.jsx("div",{className:"pt-5 pl-5 flex justify-between",children:e.jsx("div",{className:"poppins",children:"Other Members:"})}),e.jsx("div",{className:"grid lg:grid-cols-4 md:grid-cols-2 sm:grid-cols-1 gap-4 p-5",children:t.map((s,a)=>e.jsx(D,{isAdmin:!1,name:`${s.firstname} ${s.lastname}`,position:s.position||"Member",email:s.email||"No email available",college:s.college||"N/A",userID:s.userID,orgID:n,roleID:1},s.userID||`member-${a}`))})]})})})]})}export{Se as default};
