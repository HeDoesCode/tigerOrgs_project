import{j as e,r as i,W as q,Y as Q,y as T}from"./app-Nah0YeiV.js";import{S as _}from"./SuperAdminLayout-C8Y66xxk.js";import{I as P}from"./IconInvite-kXN3mUA3.js";import{I as U}from"./IconCheckBox-BJDFvKZh.js";import{M as Y}from"./MainAdminFrame-D0SRY3mz.js";import{I as N}from"./IconEdit-CYPMzQvw.js";import{S as G,A as h}from"./Searchbar-XZwVpj3n.js";import{I as J}from"./IconEye-DcenOEZw.js";import{D as K,a as X,b as Z,g as ee,d as te,c as se}from"./dropdown-menu-D5ewfSrD.js";import{A as y}from"./AdminDialog-BM415EYD.js";import{S as re,a as ne,b as ae,c as ie,d as S}from"./select-BUWGDs7b.js";import"./IconMenu3-Be-ovQ-L.js";import"./button-NIdFJHNh.js";import"./IconSearch-D5onNVrH.js";import"./dialog-q4YAmxIc.js";function le({size:s}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:s||"24",height:s||"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-users",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0"}),e.jsx("path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),e.jsx("path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85"})]})}function oe({size:s}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:s||"24",height:s||"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-bolt",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11"})]})}function ce({size:s,className:n}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:s||"24",height:s||"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`icon icon-tabler icons-tabler-outline icon-tabler-chevron-down ${n}`,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M6 9l6 6l6 -6"})]})}function de({size:s}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:s||"24",height:s||"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-device-floppy",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2"}),e.jsx("path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),e.jsx("path",{d:"M14 4l0 4l-6 0l0 -4"})]})}function me({size:s}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:s||"24",height:s||"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-cancel",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),e.jsx("path",{d:"M18.364 5.636l-12.728 12.728"})]})}function he({onSelect:s,...n}){return e.jsxs(K,{children:[e.jsx(X,{className:"w-full",children:n.triggerContent}),e.jsxs(Z,{className:"bg-[#f8f8f8] border-gray-300 flex flex-col justify-center space-y-2 p-2",children:[e.jsx(ee,{className:"poppins",children:n.title}),e.jsx(te,{className:"bg-gray-300 mx-2"}),n.dropdownItems.map((c,l)=>e.jsx(se,{onSelect:()=>s(c.value),className:"poppins",children:c.name},l))]})]})}function ue({edit:s,visible:n,setVisible:c,organization:l}){const o=n?"bg-green-50  border-green-600 text-green-800":"bg-red-50  border-red-600 text-red-800";return e.jsxs("div",{className:"hover:scale-[1.02] transition-all duration-300 ease-in-out px-4 rounded-xl divide-y divide-gray-300 shadow-lg bg-white hover:bg-gray-100 transOptimize",children:[e.jsxs("div",{className:"py-4 ",children:[e.jsxs("div",{className:"grid grid-cols-3 divide-x divide-gray-300",children:[e.jsx("div",{className:"p-2 content-center",children:e.jsx("img",{className:"rounded-full",src:l.logo,alt:l.name})}),e.jsx("div",{className:"col-span-2  px-2",children:e.jsx("h1",{className:"text-sm font-bold py-4 ",children:l.name})})]}),e.jsx("h3",{className:"text-gray-500 text-xs pt-4 text-justify font-semibold",children:l.department})]}),e.jsxs("div",{className:"grid grid-rows-1 py-4",children:[e.jsxs("div",{className:"grid grid-cols-6 py-1",children:[e.jsx("div",{className:"col-start-1 col-end-2 flex justify-center",children:e.jsx(le,{})}),e.jsx("div",{className:"text-sm font-semibold col-start-2 col-end-4 content-center",children:"Members:"}),e.jsx("div",{className:"text-sm font-semibold col-start-4 col-end-7 flex justify-center",children:l.members_count!==void 0?l.members_count:"Members not set"})]}),e.jsxs("div",{className:"grid grid-cols-6 py-1 ",children:[e.jsx("div",{className:"col-start-1 col-end-2 flex justify-center ",children:e.jsx(J,{})}),e.jsx("div",{className:"text-sm font-semibold col-start-2 col-end-4 content-center",children:e.jsx("span",{children:"Visibility:"})}),s?e.jsx("div",{className:`text-sm font-semibold col-start-4 col-end-7 flex justify-center rounded-xl border-2 ${o}`,children:e.jsx(he,{triggerContent:e.jsxs("div",{className:"pl-1 flex items-center justify-center poppins",children:[n?"Visible":"Not Visible",e.jsx(ce,{size:"15"})]}),title:"Select visibility",dropdownItems:[{name:"Visible",value:!0},{name:"Not Visible",value:!1}],onSelect:c})}):e.jsx("div",{className:`text-sm font-semibold col-start-4 col-end-7 flex justify-center rounded-xl border-2 ${o}`,children:e.jsx("div",{className:"pl-1 flex content-center poppins",children:n?"Visible":"Not Visible"})})]}),e.jsxs("div",{className:"grid grid-cols-6 py-1 ",children:[e.jsx("div",{className:"col-start-1 col-end-2 flex justify-center",children:e.jsx(oe,{})}),e.jsx("div",{className:"text-sm font-semibold col-start-2 col-end-4 content-center",children:"Status:"}),e.jsx("div",{className:`text-sm font-semibold col-start-4 col-end-7 flex justify-center rounded-xl poppins border-2 ${o}`,children:n?"Active":"Inactive"})]})]})]})}function Ee({organizations:s,departments:n}){const[c,l]=i.useState(!1),[o,k]=i.useState(""),[f,D]=i.useState(s),[j,C]=i.useState(s),[u,I]=i.useState("All"),[M,E]=i.useState(n),[v,x]=i.useState(!1),[d,p]=i.useState(s.reduce((t,r)=>(t[r.orgID]=r.visibility,t),{}));i.useEffect(()=>{(()=>{let r=f;o&&(r=r.filter(a=>a.name.toLowerCase().includes(o.toLowerCase())||a.department.toLowerCase().includes(o.toLowerCase()))),u!=="All"&&(r=r.filter(a=>a.department===u)),C(r)})()},[o,u,f]);const A=t=>{k(t.target.value)},O=t=>{I(t)},{data:xe,setData:L,post:V,processing:F,reset:z}=q({organizations:s.map(t=>({id:t.orgID,visibility:t.visibility}))});i.useEffect(()=>{L("organizations",s.map(t=>({id:t.orgID,visibility:d[t.orgID]})))},[d]);const B=()=>{x(t=>!t)},W=()=>{V(route("superadmin.update-organizations"),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{x(!1),s.forEach(t=>{t.visibility=d[t.orgID]})},onError:()=>{console.error("Save failed. Please try again.")}})},$=()=>{p(s.reduce((t,r)=>(t[r.orgID]=r.visibility,t),{})),x(!1),z()},[g,b]=i.useState({name:"",department:""});function w(t){const r=t.target.id,a=t.target.value;b(m=>({...m,[r]:a}))}function H(t){t.preventDefault(),T.post("/superadmin/addOrg",g,{preserveState:!0,preserveScroll:!0,onSuccess:r=>{b({name:"",department:""});const a=r.props.organizations;D(a);const m=r.props.departments;m&&E(m),p(R=>({...R,[a[a.length-1].orgID]:!0}))}})}return e.jsxs("div",{className:"w-full",children:[e.jsx(Q,{title:"OSA Dashboard"}),e.jsx(_,{children:e.jsx(Y,{navItems:[{icon:e.jsx(U,{}),label:"Status",link:"superadmin.status"},{icon:e.jsx(P,{}),label:"Invite",link:"superadmin.invite"}],title:`Recruitment 
                        ${c?" Enabled":" Disabled"}
                    `,dialog:e.jsx(y,{title:"Enable/Disable Recruitment",description:"When the recruitment is enabled, student leaders will be able turn on the recruitment within their organization and will be open to students. Disabling will turn off this feature on their side.",trigger:e.jsxs("div",{className:`text-sm ml-3 -mt-1 ${c?"text-red-600":"text-green-600"} underline underline-offset-2`,children:["Click here to",c?" disable":" enable"]})}),searchbar:e.jsx(G,{className:"col-span-3",value:o,onChange:A,placeholder:"Search for an organization"}),filter:e.jsx("div",{className:"text-xs col-span-2 shadow-lg  flex justify-center rounded-r-xl  bg-white   text-black ",children:e.jsxs(re,{defaultValue:"All",onValueChange:O,children:[e.jsx(ne,{className:"w-full h-12 border-white bg-transparent",children:e.jsx(ae,{placeholder:"All"})}),e.jsxs(ie,{className:"border-gray-500 bg-[#EEEEEE] quicksand",ref:t=>{t&&(t.ontouchstart=r=>r.preventDefault())},children:[e.jsx(S,{value:"All",className:"hover:!bg-gray-3 hover:!text-white focus:!bg-gray-800 focus:!text-white h-10",children:"All"}),M.map((t,r)=>e.jsx(S,{value:t,className:"hover:!bg-gray-800 hover:!text-white focus:!bg-gray-800 focus:!text-white h-10",children:t},r))]})]})}),children:e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex justify-end me-5 mt-5",children:v?e.jsxs("div",{className:"flex",children:[e.jsx(h,{className:"mr-2 bg-green-100 hover:text-white hover:bg-green-800",onClick:W,icon:e.jsx(de,{}),name:"Save",disabled:F}),e.jsx(h,{className:"mr-2 bg-red-100 hover:text-white hover:bg-red-800",onClick:$,icon:e.jsx(me,{}),name:"Cancel"})]}):e.jsxs("div",{className:"flex",children:[e.jsx(y,{title:"Manually Add Organization",description:"Enter the name and the department/college/faculty of the organization you want to add.",trigger:e.jsx(h,{className:"mr-2 bg-white hover:bg-gray-800 hover:text-white",icon:e.jsx(N,{}),name:" Add Organization"}),children:e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"name",className:"block  font-medium text-gray-700",children:"Name of the Organization:"}),e.jsx("input",{id:"name",value:g.name,onChange:w,className:"block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Enter organization name",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"department",className:"block  font-medium text-gray-700",children:"Department:"}),e.jsx("input",{id:"department",value:g.department,onChange:w,className:"block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Enter department",required:!0})]}),e.jsx("div",{className:"mt-4 grid justify-items-end",children:e.jsx("button",{type:"submit",className:"flex px-9  shadow-lg rounded-2xl bg-white hover:bg-gray-800 hover:text-white",children:e.jsx("span",{className:"ml-2  poppins hidden truncate sm:block",children:"Submit"})})})]})}),e.jsx(h,{className:"bg-white hover:bg-gray-800 hover:text-white",onClick:B,icon:e.jsx(N,{}),name:"Edit"})]})}),j.length===0?e.jsx("div",{className:"m-14 sm:m-48 text-xl font-thin text-center",children:"No Organizations Found"}):e.jsx("div",{className:"grid lg:grid-cols-4 sm:grid-cols-2 grid-cols-1 gap-4 p-5",children:j.map(t=>e.jsx(ue,{edit:v,visible:d[t.orgID],setVisible:r=>{p(a=>({...a,[t.orgID]:r}))},organization:t},t.orgID))})]})})})]})}export{Ee as default};
