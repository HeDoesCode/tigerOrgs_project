import{j as e,W as S,r as v,Y as L,y as B}from"./app-Nah0YeiV.js";import{A as E}from"./AdminLayout-HBWcH-gG.js";import{M as F}from"./MainAdminFrame-D0SRY3mz.js";import{A as k,S as W}from"./Searchbar-XZwVpj3n.js";import{I as H,a as R}from"./IconProfile-BdKZaGT5.js";import{D as O,a as P,b as V,c as b,d as Q}from"./dropdown-menu-D5ewfSrD.js";import{I}from"./IconEdit-CYPMzQvw.js";import{A as y}from"./AdminDialog-BM415EYD.js";import{I as N}from"./IconInvite-kXN3mUA3.js";import{V as T}from"./VerticalCard-BRr0Ev3n.js";import{A as U}from"./AdminAlertDialog-Ddl9iSud.js";import"./IconMenu3-Be-ovQ-L.js";import"./button-NIdFJHNh.js";import"./IconSearch-D5onNVrH.js";import"./dialog-q4YAmxIc.js";function q({size:t}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t||"24",height:t||"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-user-check",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0"}),e.jsx("path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4"}),e.jsx("path",{d:"M15 19l2 2l4 -4"})]})}function Y({size:t}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t||"24",height:t||"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-vector-bezier",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M3 14m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),e.jsx("path",{d:"M17 14m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),e.jsx("path",{d:"M10 6m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),e.jsx("path",{d:"M10 8.5a6 6 0 0 0 -5 5.5"}),e.jsx("path",{d:"M14 8.5a6 6 0 0 1 5 5.5"}),e.jsx("path",{d:"M10 8l-6 0"}),e.jsx("path",{d:"M20 8l-6 0"}),e.jsx("path",{d:"M3 8m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),e.jsx("path",{d:"M21 8m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})}function G({size:t}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t||"24",height:t||"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-building-skyscraper",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M3 21l18 0"}),e.jsx("path",{d:"M5 21v-14l8 -4v18"}),e.jsx("path",{d:"M19 21v-10l-6 -4"}),e.jsx("path",{d:"M9 9l0 .01"}),e.jsx("path",{d:"M9 12l0 .01"}),e.jsx("path",{d:"M9 15l0 .01"}),e.jsx("path",{d:"M9 18l0 .01"})]})}function J({size:t}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t||"24",height:t||"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-mail",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z"}),e.jsx("path",{d:"M3 7l9 6l9 -6"})]})}function K({userID:t,orgID:h,roleID:n,onRoleChange:i}){const{data:o,setData:u,post:l,processing:d}=S({userID:t}),m=c=>{l(route(`admin.${c}`,{orgID:h}),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{c==="make-admin"?i(2):c==="make-member"&&i(1)}})};return e.jsxs(O,{children:[e.jsx(P,{className:"w-full",disabled:d,children:e.jsx(I,{})}),e.jsxs(V,{children:[n===2?e.jsx(b,{className:"bg-[#f8f8f8] border-gray-300 cursor-pointer",onClick:()=>m("make-member"),children:"Make Member"}):e.jsx(b,{className:"bg-[#f8f8f8] border-gray-300 cursor-pointer",onClick:()=>m("make-admin"),children:"Make Admin"}),e.jsx(Q,{}),e.jsx(b,{className:"bg-[#f8f8f8] border-gray-300 cursor-pointer",onClick:()=>m("remove-student"),children:"Remove Student"})]})]})}function A({name:t,position:h,college:n,email:i,userID:o,orgID:u,roleID:l,showActions:d=!0,admins:m,setAllAdmins:c,members:C,setAllMembers:j,allAdmins:w}){const g=l===2,M=l===1;return console.log(l),e.jsxs("div",{className:"hover:scale-[1.02] transition-all duration-300 ease-in-out shadow-lg hover:bg-gray-100 p-3 w-full bg-white rounded-xl",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsxs("div",{className:`${g?"bg-[#FF9900]":"bg-[#FFBC58]"} p-1 px-4 rounded-2xl flex justify-between items-center`,children:[e.jsx("div",{className:"mx-1 text-gray-800",children:e.jsx(q,{})}),e.jsx("div",{className:"ml-2 poppins",children:g?"Admin":M?"Member":"Unknown"})]}),d&&e.jsx("div",{className:"flex",children:e.jsx("div",{className:"mx-1 text-gray-500 cursor-pointer",children:e.jsx(K,{userID:o,orgID:u,roleID:l,onRoleChange:f=>{f===2?(c(a=>[...a,{userID:o,firstname,lastname,email:i,college:n,roleID:2}]),j(a=>a.filter(x=>x.userID!==o))):(j(a=>[...a,{userID:o,firstname,lastname,email:i,college:n,roleID:1}]),c(a=>a.filter(x=>x.userID!==o)))}})})})]}),e.jsxs("div",{className:"grid grid-cols-5 mb-1",children:[e.jsx("div",{className:"col-span-1 grid content-center justify-self-center text-gray-500",children:e.jsx(H,{})}),e.jsx("div",{className:"col-span-4 text-lg font-bold truncate",children:t})]}),e.jsxs("div",{className:"grid grid-cols-5 mb-1",children:[e.jsx("div",{className:"col-span-1 grid content-center justify-self-center text-gray-500",children:e.jsx(Y,{})}),e.jsx("div",{className:"col-span-4 text-lg font-semibold truncate",children:h})]}),e.jsxs("div",{className:"grid grid-cols-5 mb-1",children:[e.jsx("div",{className:"col-span-1 grid content-center justify-self-center text-gray-500",children:e.jsx(G,{})}),e.jsx("div",{className:"col-span-4 text-md truncate",children:n})]}),e.jsxs("div",{className:"grid grid-cols-5 mb-1",children:[e.jsx("div",{className:"col-span-1 grid content-center justify-self-center text-gray-500",children:e.jsx(J,{})}),e.jsx("div",{className:"col-span-4 text-md truncate",children:i})]})]})}function he({members:t,admins:h,orgID:n,organizationName:i}){const[o,u]=v.useState(""),[l,d]=v.useState([]),m=async s=>{const r=s.target.value;if(u(r),r.length>0)try{const p=await axios.get("/superadmin/search-users",{params:{query:r}});d(p.data)}catch(p){console.error("Error fetching result:",p)}else d([])},c=s=>{w(route("admin.add-admin",n),{preserveState:!0,preserveScroll:!0})},{data:C,setData:j,post:w,processing:g,errors:M}=S({userID:"",orgID:n,roleID:1}),f=s=>{j("userID",s)},[a,x]=v.useState({orgID:n,message:""});function D(s){const r=s.target.id,p=s.target.value;x(z=>({...z,[r]:p}))}function $(s){s.preventDefault(),B.post(`/admin/${n}/makeAnnouncement`,a)}return e.jsxs("div",{className:"w-full",children:[e.jsx(L,{title:"Admin Dashboard"}),e.jsx(E,{orgID:n,children:e.jsx(F,{navItems:[{icon:e.jsx(I,{}),label:"Edit Page",link:"admin.editpage",params:{orgID:n}},{icon:e.jsx(N,{}),label:"Members",link:"admin.invite",params:{orgID:n}}],title:`Admin Invitation - ${i}`,children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-end me-5 mt-5",children:[e.jsx(y,{title:"Send Notification",description:"Send Notification to the members of your Organization",trigger:e.jsx(k,{className:"mr-2 sm:mt-0 bg-white hover:bg-gray-800 hover:text-white",icon:e.jsx(R,{}),name:"Send Notification"}),children:e.jsxs("form",{onSubmit:$,children:[e.jsx("label",{htmlFor:"message",children:"Message:"}),e.jsx("input",{id:"message",value:a.message,onChange:D}),e.jsx("button",{type:"submit",children:"Submit"})]})}),e.jsxs(y,{title:"Add Member Manually",description:"Search to add manually to the Organization",trigger:e.jsx(k,{className:"mr-2 sm:mt-0 bg-white hover:bg-gray-800 hover:text-white",icon:e.jsx(N,{}),name:"Add Member Manually"}),children:[e.jsx(W,{value:o,onChange:m,placeholder:"Search by name or email"}),e.jsx("div",{children:l.map(s=>e.jsxs(T,{gridcol:"grid-cols-4",children:[e.jsxs("div",{className:"text-sm font-bold content-center text-center",children:[s.firstname," ",s.lastname]}),e.jsx("div",{className:"truncate col-span-2 content-center text-sm font-semibold text-center",children:s.email}),e.jsx("div",{className:"sm px-4 text-sm content-center ",children:e.jsx(U,{trigger:e.jsxs("div",{role:"button",className:"mr-2 bg-white flex items-center justify-center px-9  shadow-lg rounded-2xl hover:bg-gray-800 hover:text-white",name:"Assign",onClick:()=>{f(s.userID)},children:[e.jsx(N,{}),e.jsx("span",{className:"ml-2 poppins hidden truncate sm:block",children:"Assign"})]}),title:`Add ${s.firstname} ${s.lastname} to the organization?`,description:"This adds the chosen user to the organization.",accept:"Confirm",onclick:c})})]},s.userID))})]})]}),e.jsx("div",{className:"pt-5 pl-5 flex justify-between",children:e.jsx("div",{className:"poppins",children:"Current Admin(s):"})}),e.jsx("div",{className:"grid lg:grid-cols-4 md:grid-cols-2 sm:grid-cols-1 gap-4 p-5",children:h.map((s,r)=>e.jsx(A,{isAdmin:!0,name:`${s.firstname} ${s.lastname}`,position:s.position||"Member",email:s.email||"No email available",college:s.college||"N/A",userID:s.userID,orgID:n,roleID:2},s.userID||`admin-${r}`))}),e.jsx("div",{className:"pt-5 pl-5 flex justify-between",children:e.jsx("div",{className:"poppins",children:"Other Members:"})}),e.jsx("div",{className:"grid lg:grid-cols-4 md:grid-cols-2 sm:grid-cols-1 gap-4 p-5",children:t.map((s,r)=>e.jsx(A,{isAdmin:!1,name:`${s.firstname} ${s.lastname}`,position:s.position||"Member",email:s.email||"No email available",college:s.college||"N/A",userID:s.userID,orgID:n,roleID:1},s.userID||`member-${r}`))})]})})})]})}export{he as default};
