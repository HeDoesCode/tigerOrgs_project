import{r as x,j as e,y as S,Y as E}from"./app-wTbvq_QV.js";import{I as M}from"./IconMailFilled-gS_nx1u2.js";import{U as B}from"./UserLayout-B_eFBEF5.js";import{D as $,d as T,g as W,i as A,j as H,k as R,m as Y}from"./index-fuKT8Dx1.js";import{B as O}from"./button-UyB_9sy1.js";import C from"./InputContainer-D57pgq0d.js";import"./IconMenu3-CRQ8g1bN.js";import"./IconProfile-D6326uKr.js";import"./dropdown-menu-DaaXx7JZ.js";import"./index-CkVXNEJA.js";function P({keywords:s,className:g,activeUserKeywords:c}){s=h(s);function h(t){return t.sort((r,o)=>r.keyword.localeCompare(o.keyword))}const[n,m]=x.useState([]),[l,i]=x.useState([]),[f,w]=x.useState(!1);x.useEffect(()=>{u()},[]),x.useEffect(()=>{w(n!==c)},[n]);const u=()=>{m(c);const t=s.filter(r=>!c.some(o=>o.keyword===r.keyword));i(t)},[d,K]=x.useState(""),D=t=>{if(K(t.target.value),t.target.value===""||t.target.value===null){i(h(l));return}const r=l.filter(a=>a.keyword.toLowerCase().includes(t.target.value.toLowerCase())).sort((a,b)=>{const p=t.target.value.toLowerCase(),y=a.keyword.toLowerCase(),j=b.keyword.toLowerCase(),N=y.startsWith(p)?0:1,k=j.startsWith(p)?0:1;return N!==k?N-k:y.indexOf(p)-j.indexOf(p)||y.localeCompare(j)}),o=l.filter(a=>!a.keyword.toLowerCase().includes(t.target.value.toLowerCase())).sort((a,b)=>a.keyword.localeCompare(b.keyword));i([...r,...o])},F=t=>{const r=h([...n,t]);m(r),i(o=>o.filter(a=>a.keyID!==t.keyID))},I=t=>{const r=[t,...l];i(h(r)),m(o=>o.filter(a=>a.keyID!==t.keyID))},L=()=>{S.patch(route("update.user.keywords"),{activeKeywords:n})};return e.jsxs("div",{className:`w-full flex flex-wrap gap-2 min-h-10 border-[1px] rounded-md p-2 relative text-xs overflow-clip group ${g}`,children:[e.jsxs($,{children:[e.jsx(T,{className:"absolute size-full inset-0",children:e.jsxs("div",{className:"size-full flex items-center justify-center invisible group-hover:visible group-hover:!bg-gray-800/70 text-black/0 group-hover:!text-white transition-all duration-200 ease-in-out",children:[n&&"Edit"||"Add","Â Keyword Filters"]})}),e.jsxs(W,{className:"sm:max-w-[32rem] !h-fit max-h-[90%] w-[90%] sm:h-auto overflow-y-auto select-none",children:[e.jsxs(A,{children:[e.jsx(H,{children:"Add/Remove Keyword Filters"}),e.jsxs(R,{className:"!-mb-3",children:["Filter organizations by adding or removing keywords. Save changes when you're done.",e.jsxs("span",{className:`text-red-500 font-bold ${f?"visible":"invisible"}`,children:[e.jsx("br",{}),"You have unsaved changes."]})]})]}),e.jsxs("div",{className:"flex gap-x-3",children:[e.jsx("input",{className:"w-full rounded-md",type:"text",autoComplete:"off",placeholder:"Find Keywords...",name:"keyword_filter",onChange:D,value:d}),e.jsx("button",{onClick:u,className:"h-full px-3 border border-black rounded-md hover:bg-gray-800 hover:text-white transition-all",children:"Reset"})]}),e.jsxs("div",{className:"w-full flex flex-wrap justify-center sm:justify-start gap-2 border-[1px] rounded-md border-gray-800 p-2 relative text-xs overflow-clip",children:[n.length!==0&&n.map((t,r)=>e.jsx(v,{name:t.keyword,remove:!0,onClick:()=>I(t)},r)),n.length===0&&e.jsx("div",{className:"pl-1 h-8 flex items-center",children:"(No Keywords Selected)"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-up",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M12 5l0 14"}),e.jsx("path",{d:"M18 11l-6 -6"}),e.jsx("path",{d:"M6 11l6 -6"})]})}),e.jsx("div",{className:"w-full flex flex-wrap justify-center sm:justify-start gap-2 border-[1px] rounded-md border-gray-300 p-2 relative text-xs",children:l.map((t,r)=>e.jsx(v,{name:t.keyword,add:!0,onClick:()=>F(t)},r))}),f&&e.jsx(Y,{asChild:!0,children:e.jsxs("div",{className:"w-full flex justify-end space-x-3",children:[e.jsx("div",{className:"text-red-500 font-bold my-auto",children:"You have unsaved changes."}),e.jsx(O,{type:"button",className:"bg-transparent hover:!bg-gray-800 text-black hover:!text-white border border-black w-fit",onClick:L,children:"Update"})]})})]})]}),c.length!==0?c.map((t,r)=>e.jsx(z,{name:t.keyword},r)):e.jsx("div",{className:"text-gray-500 my-auto flex items-center",children:"(None Selected. We'll use this to recommend organizations to you.)"})]});function z({name:t}){return e.jsx("div",{className:"w-min px-2 py-1 bg-[#ffb700] border border-gray-300 h-fit rounded-md cursor-pointer whitespace-nowrap",children:t})}function v({name:t,remove:r,add:o,...a}){return e.jsxs("button",{...a,className:`select-none w-min px-2 py-1 ${o&&"bg-gray-200"} ${r&&"bg-[#ffb700]"} border border-gray-300 h-8 rounded-md space-x-2 flex items-center ${o&&"hover:bg-gray-300"} ${r&&"hover:bg-[#e6a70b]"} group`,children:[e.jsx("span",{className:"whitespace-nowrap",children:t}),e.jsxs("div",{className:"h-5 aspect-square text-gray-400",children:[r&&e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"currentColor",className:"icon icon-tabler icons-tabler-filled icon-tabler-circle-x text-black/70",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M17 3.34a10 10 0 1 1 -14.995 8.984l-.005 -.324l.005 -.324a10 10 0 0 1 14.995 -8.336zm-6.489 5.8a1 1 0 0 0 -1.218 1.567l1.292 1.293l-1.292 1.293l-.083 .094a1 1 0 0 0 1.497 1.32l1.293 -1.292l1.293 1.292l.094 .083a1 1 0 0 0 1.32 -1.497l-1.292 -1.293l1.292 -1.293l.083 -.094a1 1 0 0 0 -1.497 -1.32l-1.293 1.292l-1.293 -1.292l-.094 -.083z"})]}),o&&e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"currentColor",className:"icon icon-tabler icons-tabler-filled icon-tabler-circle-plus",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M4.929 4.929a10 10 0 1 1 14.141 14.141a10 10 0 0 1 -14.14 -14.14zm8.071 4.071a1 1 0 1 0 -2 0v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0 -2h-2v-2z"})]})]})]})}}function te({user:s,activeUserKeywords:g,keywords:c}){const h=`${s.firstname} ${s.lastname} ${s.middlename}`,n=s.section!=null?null:"Specify Section";return e.jsxs("div",{className:"w-full",children:[e.jsx(E,{title:"Profile"}),e.jsxs(B,{children:[e.jsxs("div",{className:"w-full poppins text-lg md:text-xl font-bold mt-3 mb-5",children:["Manage ",e.jsx("span",{className:"text-[#ffb700]",children:"Profile"})]}),e.jsx("div",{className:"mt-4 w-full flex justify-center px-5",children:e.jsxs("div",{className:"w-full max-w-[65rem] flex flex-col items-center drop-shadow shadow-black rounded-[2rem] space-y-3 bg-[#F4F4F4] border border-gray-300",children:[e.jsxs("div",{className:"h-36 w-full flex flex-col justify-center px-12 space-y-3 bg-[#ffd875] rounded-[2rem]",children:[e.jsx("span",{className:"poetsen-one text-xl sm:text-3xl uppercase ",children:h}),e.jsxs("div",{className:"flex gap-x-3 text-sm sm:textbase",children:[e.jsx("div",{className:"hidden sm:contents",children:e.jsx(M,{})}),e.jsx("span",{children:s.email})]})]}),e.jsxs("div",{className:"w-full rounded-[2rem] bg-[#F0F0F0] drop-shadow border border-gray-300 p-8",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:[e.jsxs("div",{className:"",children:["ID Number:",e.jsx("div",{className:"text-lg font-semibold",children:s.userID})]}),e.jsxs("div",{className:"",children:["Affiliation:",e.jsx("div",{className:"text-lg font-semibold ",children:s.college})]}),e.jsxs("div",{className:"",children:["Stakeholder Category:",e.jsx("div",{className:"text-lg font-semibold ",children:s.status})]}),e.jsx(m,{})]}),e.jsx("div",{className:"mt-10",children:e.jsx(C,{title:"Interests",className:"min-h-11",children:e.jsx(P,{activeUserKeywords:g,keywords:c})})})]})]})})]})]});function m(){const[l,i]=x.useState(s.section||""),f=d=>{i(d.target.value)},w=d=>{d.key==="Enter"&&u(l)},u=d=>{d===""||l===s.section||S.patch(route("update.user.section"),{section:d})};return e.jsx(C,{title:"Section",error:n||l!==s.section?"Unsaved":"",children:e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"text",maxLength:10,placeholder:"[YEAR]-[SECTION] ex. 3-ITG",className:"w-full rounded-l-lg focus:border-black border-transparent",value:l,onChange:f,onKeyDown:w}),l!==s.section&&e.jsx("button",{className:"px-3 border-l border-l-gray-200",onClick:()=>i(s.section||""),children:"Cancel"}),e.jsx("button",{className:`rounded-r-lg border-l border-l-gray-200 px-3 ${l!==s.section?"hover:bg-black/5 text-black":"cursor-not-allowed text-gray-500"}`,disabled:l===s.section,onClick:()=>u(l),children:"Save"})]})})}}export{te as default};
